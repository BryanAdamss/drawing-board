(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("crypto")):"function"==typeof define&&define.amd?define(["crypto"],t):(e=e||self,e.DrawingBoard=t(e.crypto$1))})(this,function(e){'use strict';var dn=Math.PI,cn=Math.floor,mn=Math.sqrt,un=Math.LN10,gn=Math.log,hn=Math.ceil,xn=Math.min,_n=Math.pow,fn=Math.max,vn=Math.abs,bn=Math.round;function t(t,a){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var s=o.call(t),i=[],p,l;try{for(;(void 0===a||0<a--)&&!(p=s.next()).done;)i.push(p.value)}catch(e){l={error:e}}finally{try{p&&!p.done&&(o=s["return"])&&o.call(s)}finally{if(l)throw l.error}}return i}function n(e,t){return i?(e.lastModifiedDate=new Date,e.name=t,e):new File([e],t,{type:e.type})}function a(e){return"number"==typeof e}function r(e){return e&&!0===e.constructor.prototype.isBigNumber||!1}function o(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function s(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function p(e){return e&&!0===e.constructor.prototype.isUnit||!1}function l(e){return"string"==typeof e}function u(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function g(e){return Array.isArray(e)||u(e)}function h(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function y(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function _(e){return e&&!0===e.constructor.prototype.isRange||!1}function f(e){return e&&!0===e.constructor.prototype.isIndex||!1}function v(e){return"boolean"==typeof e}function b(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function M(e){return e&&!0===e.constructor.prototype.isHelp||!1}function S(e){return"function"==typeof e}function N(e){return e instanceof Date}function z(e){return e instanceof RegExp}function E(e){return!(!e||"object"!=typeof e||e.constructor!==Object||o(e)||s(e))}function C(e){return null===e}function I(e){return e===void 0}function A(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function k(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function D(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function j(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function O(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function w(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function T(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function F(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function B(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function L(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function R(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function U(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function q(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function Z(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function H(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function V(e){return e&&!0===e.constructor.prototype.isChain||!1}function Y(e){var n=typeof e;return"object"==n?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":r(e)?"BigNumber":o(e)?"Complex":s(e)?"Fraction":u(e)?"Matrix":p(e)?"Unit":f(e)?"Index":_(e)?"Range":b(e)?"ResultSet":L(e)?e.type:V(e)?"Chain":M(e)?"Help":"Object":"function"==n?"Function":n}function W(e){var t=typeof e;if("number"==t||"string"==t||"boolean"==t||null===e||e===void 0)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map(function(e){return W(e)});if(e instanceof Date)return new Date(e.valueOf());if(r(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return X(e,W)}function X(e,t){var n={};for(var i in e)K(e,i)&&(n[i]=t(e[i]));return n}function J(e,t){for(var n in t)K(t,n)&&(e[n]=t[n]);return e}function G(e,t){var n,a,r;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(a=0,r=e.length;a<r;a++)if(!G(e[a],t[a]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!G(e[n],t[n]))return!1;for(n in t)if(!(n in e)||!G(e[n],t[n]))return!1;return!0}return e===t}function K(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Q(e,t){for(var n={},a=0;a<t.length;a++){var r=t[a],o=e[r];o!==void 0&&(n[r]=o)}return n}function ee(){return ee=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var a in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ee.apply(this,arguments)}function te(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function ne(e,t){return t={exports:{}},e(t,t.exports),t.exports}function ie(e){return!("boolean"!=typeof e)||!!isFinite(e)&&e===bn(e)}function ae(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-Infinity)return"-Infinity";if(isNaN(e))return"NaN";var n="auto",i;switch(t&&(t.notation&&(n=t.notation),a(t)?i=t:a(t.precision)&&(i=t.precision)),n){case"fixed":return se(e,i);case"exponential":return pe(e,i);case"engineering":return oe(e,i);case"auto":return le(e,i,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],n=arguments[4];return"."===t?n:t+n});default:throw new Error("Unknown notation \""+n+"\". Choose \"auto\", \"exponential\", or \"fixed\".");}}function re(e){var t=(e+"").toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],i=t[2],a=parseFloat(t[4]||"0"),r=i.indexOf(".");a+=-1===r?i.length-1:r-1;var o=i.replace(".","").replace(/^0*/,function(e){return a-=e.length,""}).replace(/0*$/,"").split("").map(function(e){return parseInt(e)});return 0===o.length&&(o.push(0),a++),{sign:n,coefficients:o,exponent:a}}function oe(t,n){if(isNaN(t)||!isFinite(t))return t+"";var r=re(t),o=de(r,n),s=o.exponent,e=o.coefficients,p=0==s%3?s:0>s?s-3-s%3:s-s%3;if(a(n))for(;n>e.length||s-p+1>e.length;)e.push(0);else for(var l=vn(s-p)-(e.length-1),d=0;d<l;d++)e.push(0);for(var c=vn(s-p),m=1;0<c;)m++,c--;var u=e.slice(m).join(""),g=a(n)&&u.length||u.match(/[1-9]/)?"."+u:"",h=e.slice(0,m).join("")+g+"e"+(0<=s?"+":"")+p.toString();return o.sign+h}function se(e,t){if(isNaN(e)||!isFinite(e))return e+"";var n=re(e),i="number"==typeof t?de(n,n.exponent+1+t):n,a=i.coefficients,r=i.exponent+1,o=r+(t||0);return a.length<o&&(a=a.concat(ce(o-a.length))),0>r&&(a=ce(-r+1).concat(a),r=1),r<a.length&&a.splice(r,0,0===r?"0.":"."),i.sign+a.join("")}function pe(t,n){if(isNaN(t)||!isFinite(t))return t+"";var i=re(t),a=n?de(i,n):i,r=a.coefficients,o=a.exponent;r.length<n&&(r=r.concat(ce(n-r.length)));var e=r.shift();return a.sign+e+(0<r.length?"."+r.join(""):"")+"e"+(0<=o?"+":"")+o}function le(t,n,i){if(isNaN(t)||!isFinite(t))return t+"";var a=i&&i.lowerExp!==void 0?i.lowerExp:-3,r=i&&i.upperExp!==void 0?i.upperExp:5,o=re(t),s=n?de(o,n):o;if(s.exponent<a||s.exponent>=r)return pe(t,n);var p=s.coefficients,l=s.exponent;p.length<n&&(p=p.concat(ce(n-p.length))),p=p.concat(ce(l-p.length+1+(p.length<n?n-p.length:0))),p=ce(-l).concat(p);var e=0<l?l:0;return e<p.length-1&&p.splice(e+1,0,"."),s.sign+p.join("")}function de(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},a=n.coefficients;0>=t;)a.unshift(0),n.exponent++,t++;if(a.length>t){var r=a.splice(t,a.length-t);if(5<=r[0]){var o=t-1;for(a[o]++;10===a[o];)a.pop(),0==o&&(a.unshift(0),n.exponent++,o++),o--,a[o]++}}return n}function ce(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function me(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function ue(e,t,n){if(null===n||n===void 0)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var i=vn(e-t);return!!(i<kn)||i<=fn(vn(e),vn(t))*n}return!1}function ge(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var n="auto",i;switch(void 0!==t&&(t.notation&&(n=t.notation),"number"==typeof t?i=t:t.precision&&(i=t.precision)),n){case"fixed":return xe(e,i);case"exponential":return ye(e,i);case"engineering":return he(e,i);case"auto":{var a=t&&void 0!==t.lowerExp?t.lowerExp:-3,r=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var o=e.toSignificantDigits(i),s=o.e,p;return p=s>=a&&s<r?o.toFixed():ye(e,i),p.replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],n=arguments[4];return"."===t?n:t+n})}default:throw new Error("Unknown notation \""+n+"\". Choose \"auto\", \"exponential\", or \"fixed\".");}}function he(t,n){var i=t.e,e=0==i%3?i:0>i?i-3-i%3:i-i%3,a=t.mul(_n(10,-e)),r=a.toPrecision(n);return-1!==r.indexOf("e")&&(r=a.toString()),r+"e"+(0<=i?"+":"")+e.toString()}function ye(e,t){return void 0===t?e.toExponential():e.toExponential(t-1)}function xe(e,t){return e.toFixed(t)}function _e(e,t){if("number"==typeof e)return ae(e,t);if(r(e))return ge(e,t);if(ve(e))return t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d;if(Array.isArray(e))return fe(e,t);if(l(e))return"\""+e+"\"";if("function"==typeof e)return e.syntax?e.syntax+"":"function";if(e&&"object"==typeof e){if("function"==typeof e.format)return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(n=>"\""+n+"\": "+_e(e[n],t));return"{"+n.join(", ")+"}"}return e+""}function fe(e,t){if(Array.isArray(e)){for(var n="[",a=e.length,r=0;r<a;r++)0!=r&&(n+=", "),n+=fe(e[r],t);return n+="]",n}return _e(e,t)}function ve(e){return e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}function be(e,t,n){if(!(this instanceof be))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}function Me(e,t,n){if(!(this instanceof Me))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,3>arguments.length?(this.min=0,this.max=t):(this.min=t,this.max=n),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=new Error().stack}function Se(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function Ne(e,t,n){var a=e.length,r;if(a!==t[n])throw new be(a,t[n]);if(n<t.length-1){for(r=0;r<a;r++){var o=e[r];if(!Array.isArray(o))throw new be(t.length-1,t.length,"<");Ne(e[r],t,n+1)}}else for(r=0;r<a;r++)if(Array.isArray(e[r]))throw new be(t.length+1,t.length,">")}function ze(e,t){var n=0===t.length;if(!n)Ne(e,t,0);else if(Array.isArray(e))throw new be(e.length,0)}function Ee(e,t){if(!a(e)||!ie(e))throw new TypeError("Index must be an integer (value: "+e+")");if(0>e||"number"==typeof t&&e>=t)throw new Me(e,t)}function Ce(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");t.forEach(function(e){if(!a(e)||!ie(e)||0>e)throw new TypeError("Invalid size, must contain positive integers (size: "+_e(t)+")")});var i=void 0===n?0:n;return Ie(e,t,0,i),e}function Ie(e,t,n,a){var r=e.length,o=t[n],s=xn(r,o),p,l;if(e.length=o,n<t.length-1){var d=n+1;for(p=0;p<s;p++)l=e[p],Array.isArray(l)||(l=[l],e[p]=l),Ie(l,t,d,a);for(p=s;p<o;p++)l=[],e[p]=l,Ie(l,t,d,a)}else{for(p=0;p<s;p++)for(;Array.isArray(e[p]);)e[p]=e[p][0];for(p=s;p<o;p++)e[p]=a}}function Ae(t,n){function i(e){return e.reduce((e,t)=>e*t)}var a=Pe(t),r;if(!Array.isArray(t)||!Array.isArray(n))throw new TypeError("Array expected");if(0===n.length)throw new be(0,i(Se(t)),"!=");for(var o=1,s=0;s<n.length;s++)o*=n[s];if(a.length!==o)throw new be(i(n),i(Se(t)),"!=");try{r=ke(a,n)}catch(a){if(a instanceof be)throw new be(i(n),i(Se(t)),"!=");throw a}return r}function ke(e,t){for(var n=e,a=t.length-1,r,o;0<a;a--){o=t[a],r=[];for(var s=n.length/o,p=0;p<s;p++)r.push(n.slice(p*o,(p+1)*o));n=r}return n}function De(e,t,n,a){var r=a||Se(e);if(n)for(var o=0;o<n;o++)e=[e],r.unshift(1);for(e=je(e,t,0);r.length<t;)r.push(1);return e}function je(e,t,n){var a,r;if(Array.isArray(e)){for(a=0,r=e.length;a<r;a++)e[a]=je(e[a],t,n+1)}else for(var o=n;o<t;o++)e=[e];return e}function Pe(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function e(n){Array.isArray(n)?n.forEach(e):t.push(n)}),t}function Oe(e,t){for(var n=0,a=0,r;a<e.length;a++){var o=e[a],s=Array.isArray(o);if(0==a&&s&&(n=o.length),s&&o.length!==n)return;var p=s?Oe(o,t):t(o);if(void 0===r)r=p;else if(r!==p)return"mixed"}return r}function we(e,t,n,i){function a(i){var a=Q(i,t.map(Be));return Te(e,t,i),n(a)}return a.isFactory=!0,a.fn=e,a.dependencies=t.slice().sort(),i&&(a.meta=i),a}function Te(e,t,n){var i=t.filter(e=>!Fe(e)).every(e=>n[e]!==void 0);if(!i){var a=t.filter(e=>n[e]===void 0);throw new Error("Cannot create function \"".concat(e,"\", ")+"some dependencies are missing: ".concat(a.map(e=>"\"".concat(e,"\"")).join(", "),"."))}}function Fe(e){return e&&"?"===e[0]}function Be(e){return e&&"?"===e[0]?e.slice(1):e}function Le(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Re(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function Ue(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function qe(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}function Ze(e){var t=e.length-1,n="",a=e[0],r,o,s;if(0<t){for(n+=a,r=1;r<t;r++)s=e[r]+"",o=7-s.length,o&&(n+=et(o)),n+=s;a=e[r],s=a+"",o=7-s.length,o&&(n+=et(o))}else if(0===a)return"0";for(;0==a%10;)a/=10;return n+a}function He(e,t,n){if(e!==~~e||e<t||e>n)throw Error("[DecimalError] Invalid argument: "+e)}function Ve(e,t,n,a){var o,s,p,l;for(s=e[0];10<=s;s/=10)--t;return 0>--t?(t+=7,o=0):(o=hn((t+1)/7),t%=7),s=qn(10,7-t),l=0|e[o]%s,null==a?3>t?(0==t?l=0|l/100:1==t&&(l=0|l/10),p=4>n&&99999==l||3<n&&49999==l||5e4==l||0==l):p=(4>n&&l+1==s||3<n&&l+1==s/2)&&(0|e[o+1]/s/100)==qn(10,t-2)-1||(l==s/2||0==l)&&0==(0|e[o+1]/s/100):4>t?(0==t?l=0|l/1e3:1==t?l=0|l/100:2==t&&(l=0|l/10),p=(a||4>n)&&9999==l||!a&&3<n&&4999==l):p=((a||4>n)&&l+1==s||!a&&3<n&&l+1==s/2)&&(0|e[o+1]/s/1e3)==qn(10,t-3)-1,p}function Ye(e,t,n){for(var a=[0],r=0,o=e.length,s,p;r<o;){for(p=a.length;p--;)a[p]*=t;for(a[0]+="0123456789abcdef".indexOf(e.charAt(r++)),s=0;s<a.length;s++)a[s]>n-1&&(void 0===a[s+1]&&(a[s+1]=0),a[s+1]+=0|a[s]/n,a[s]%=n)}return a.reverse()}function We(e,t){var n=t.d.length,a,r;32>n?(a=hn(n/3),r=(1/ct(4,a)).toString()):(a=16,r="2.3283064365386962890625e-10"),e.precision+=a,t=dt(e,1,t.times(r),new e(1));for(var o=a,s;o--;)s=t.times(t),t=s.times(s).minus(s).times(8).plus(1);return e.precision-=a,t}function Xe(e,t,n,a){var r=e.constructor,o,s,p,l,d,c,m,u,g;out:if(null!=t){if(u=e.d,!u)return e;for(o=1,l=u[0];10<=l;l/=10)o++;if(s=t-o,0>s)s+=7,p=t,m=u[g=0],d=0|m/qn(10,o-p-1)%10;else if(g=hn((s+1)/7),l=u.length,!(g>=l)){for(m=l=u[g],o=1;10<=l;l/=10)o++;s%=7,p=s-7+o,d=0>p?0:0|m/qn(10,o-p-1)%10}else if(a){for(;l++<=g;)u.push(0);m=d=0,o=1,s%=7,p=s-7+1}else break out;if(a=a||0>t||void 0!==u[g+1]||(0>p?m:m%qn(10,o-p-1)),c=4>n?(d||a)&&(0==n||n==(0>e.s?3:2)):5<d||5==d&&(4==n||a||6==n&&1&(0<s?0<p?m/qn(10,o-p):0:u[g-1])%10||n==(0>e.s?8:7)),1>t||!u[0])return u.length=0,c?(t-=e.e+1,u[0]=qn(10,(7-t%7)%7),e.e=-t||0):u[0]=e.e=0,e;if(0==s?(u.length=g,l=1,g--):(u.length=g+1,l=qn(10,7-s),u[g]=0<p?(0|m/qn(10,o-p)%qn(10,p))*l:0),c)for(;;)if(0==g){for(s=1,p=u[0];10<=p;p/=10)s++;for(p=u[0]+=l,l=1;10<=p;p/=10)l++;s!=l&&(e.e++,10000000==u[0]&&(u[0]=1));break}else{if(u[g]+=l,10000000!=u[g])break;u[g--]=0,l=1}for(s=u.length;0===u[--s];)u.pop()}return Bn&&(e.e>r.maxE?(e.d=null,e.e=NaN):e.e<r.minE&&(e.e=0,e.d=[0])),e}function Je(t,n,i){if(!t.isFinite())return ot(t);var a=t.e,e=Ze(t.d),r=e.length,o;return n?(i&&0<(o=i-r)?e=e.charAt(0)+"."+e.slice(1)+et(o):1<r&&(e=e.charAt(0)+"."+e.slice(1)),e=e+(0>t.e?"e":"e+")+t.e):0>a?(e="0."+et(-a-1)+e,i&&0<(o=i-r)&&(e+=et(o))):a>=r?(e+=et(a+1-r),i&&0<(o=i-a-1)&&(e=e+"."+et(o))):((o=a+1)<r&&(e=e.slice(0,o)+"."+e.slice(o)),i&&0<(o=i-r)&&(a+1===r&&(e+="."),e+=et(o))),e}function Ge(t,n){var i=t[0];for(n*=7;10<=i;i/=10)n++;return n}function Ke(e,t,n){if(t>Jn)throw Bn=!0,n&&(e.precision=n),Error("[DecimalError] Precision limit exceeded");return Xe(new e(wn),t,1,!0)}function Qe(e,t,n){if(t>Gn)throw Error("[DecimalError] Precision limit exceeded");return Xe(new e(Tn),t,n,!0)}function $e(e){var t=e.length-1,n=7*t+1;if(t=e[t],t){for(;0==t%10;t/=10)n--;for(t=e[0];10<=t;t/=10)n++}return n}function et(e){for(var t="";e--;)t+="0";return t}function tt(e,t,i,a){var o=new e(1),s=hn(a/7+4),p;for(Bn=!1;;){if(i%2&&(o=o.times(t),gt(o.d,s)&&(p=!0)),i=Un(i/2),0===i){i=o.d.length-1,p&&0===o.d[i]&&++o.d[i];break}t=t.times(t),gt(t.d,s)}return Bn=!0,o}function nt(e){return 1&e.d[e.d.length-1]}function it(e,t,n){for(var a=new e(t[0]),r=0,o;++r<t.length;)if(o=new e(t[r]),!o.s){a=o;break}else a[n](o)&&(a=o);return a}function at(e,n){var a=0,r=0,o=0,s=e.constructor,p=s.rounding,l=s.precision,d,c,m,u,g,h,y;if(!e.d||!e.d[0]||17<e.e)return new s(e.d?e.d[0]?0>e.s?0:1/0:1:e.s?0>e.s?0:e:0/0);for(null==n?(Bn=!1,y=l):y=n,h=new s(.03125);-2<e.e;)e=e.times(h),o+=5;for(c=0|2*(gn(qn(2,o))/un)+5,y+=c,d=u=g=new s(1),s.precision=y;;){if(u=Xe(u.times(e),y,1),d=d.times(++r),h=g.plus($n(u,d,y,1)),Ze(h.d).slice(0,y)===Ze(g.d).slice(0,y)){for(m=o;m--;)g=Xe(g.times(g),y,1);if(null!=n)return s.precision=l,g;if(3>a&&Ve(g.d,y-c,p,a))s.precision=y+=10,d=u=h=new s(1),r=0,a++;else return Xe(g,s.precision=l,p,Bn=!0)}g=h}}function rt(i,a){var r=1,o=i,s=o.d,p=o.constructor,l=p.rounding,d=p.precision,m,u,g,h,y,_,f,v,b,M,S;if(0>o.s||!s||!s[0]||!o.e&&1==s[0]&&1==s.length)return new p(s&&!s[0]?-1/0:1==o.s?s?0:o:NaN);if(null==a?(Bn=!1,b=d):b=a,p.precision=b+=10,m=Ze(s),u=m.charAt(0),15e14>vn(h=o.e)){for(;7>u&&1!=u||1==u&&3<m.charAt(1);)o=o.times(i),m=Ze(o.d),u=m.charAt(0),r++;h=o.e,1<u?(o=new p("0."+m),h++):o=new p(u+"."+m.slice(1))}else return v=Ke(p,b+2,d).times(h+""),o=rt(new p(u+"."+m.slice(1)),b-10).plus(v),p.precision=d,null==a?Xe(o,d,l,Bn=!0):o;for(M=o,f=y=o=$n(o.minus(1),o.plus(1),b,1),S=Xe(o.times(o),b,1),g=3;;){if(y=Xe(y.times(S),b,1),v=f.plus($n(y,new p(g),b,1)),Ze(v.d).slice(0,b)===Ze(f.d).slice(0,b)){if(f=f.times(2),0!==h&&(f=f.plus(Ke(p,b+2,d).times(h+""))),f=$n(f,new p(r),b,1),null!=a)return p.precision=d,f;if(Ve(f.d,b-10,l,_))p.precision=b+=10,v=y=o=$n(M.minus(1),M.plus(1),b,1),S=Xe(o.times(o),b,1),g=_=1;else return Xe(f,p.precision=d,l,Bn=!0)}f=v,g+=2}}function ot(e){return e.s*e.s/0+""}function st(t,n){var a,r,o;for(-1<(a=n.indexOf("."))&&(n=n.replace(".","")),0<(r=n.search(/e/i))?(0>a&&(a=r),a+=+n.slice(r+1),n=n.substring(0,r)):0>a&&(a=n.length),r=0;48===n.charCodeAt(r);r++);for(o=n.length;48===n.charCodeAt(o-1);--o);if(n=n.slice(r,o),n){if(o-=r,t.e=a=a-r-1,t.d=[],r=(a+1)%7,0>a&&(r+=7),r<o){for(r&&t.d.push(+n.slice(0,r)),o-=7;r<o;)t.d.push(+n.slice(r,r+=7));n=n.slice(r),r=7-n.length}else r-=o;for(;r--;)n+="0";t.d.push(+n),Bn&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function pt(e,t){var n,a,r,o,s,l,d,c,m;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Hn.test(t))n=16,t=t.toLowerCase();else if(Zn.test(t))n=2;else if(Vn.test(t))n=8;else throw Error("[DecimalError] Invalid argument: "+t);for(o=t.search(/p/i),0<o?(d=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=0<=o,a=e.constructor,s&&(t=t.replace(".",""),l=t.length,o=l-o,r=tt(a,new a(n),o,2*o)),c=Ye(t,n,10000000),m=c.length-1,o=m;0===c[o];--o)c.pop();return 0>o?new a(0*e.s):(e.e=Ge(c,m),e.d=c,Bn=!1,s&&(e=$n(e,r,4*l)),d&&(e=e.times(54>vn(d)?qn(2,d):ei.pow(2,d))),Bn=!0,e)}function lt(e,t){var n=t.d.length,i;if(3>n)return dt(e,2,t,t);i=1.4*mn(n),i=16<i?16:0|i,t=t.times(1/ct(5,i)),t=dt(e,2,t,t);for(var a=new e(5),r=new e(16),o=new e(20),s;i--;)s=t.times(t),t=t.times(a.plus(s.times(r.times(s).minus(o))));return t}function dt(e,i,a,r,o){var s=e.precision,p=hn(s/7),l,d,c,m;for(Bn=!1,m=a.times(a),c=new e(r);;){if(d=$n(c.times(m),new e(i++*i++),s,1),c=o?r.plus(d):r.minus(d),r=$n(d.times(m),new e(i++*i++),s,1),d=c.plus(r),void 0!==d.d[p]){for(l=p;d.d[l]===c.d[l]&&l--;);if(-1==l)break}l=c,c=r,r=d,d=l}return Bn=!0,d.d.length=p+1,d}function ct(t,i){for(var a=t;--i;)a*=t;return a}function mt(e,n){var i=0>n.s,a=Qe(e,e.precision,1),r=a.times(.5),o;if(n=n.abs(),n.lte(r))return Qn=i?4:1,n;if(o=n.divToInt(a),o.isZero())Qn=i?3:2;else{if(n=n.minus(o.times(a)),n.lte(r))return Qn=nt(o)?i?2:3:i?4:1,n;Qn=nt(o)?i?1:4:i?3:2}return n.minus(a).abs()}function ut(t,n,a,r){var o=t.constructor,s=void 0!==a,p,l,d,c,m,u,g,h,_;if(s?(He(a,1,1000000000),void 0===r?r=o.rounding:He(r,0,8)):(a=o.precision,r=o.rounding),!t.isFinite())g=ot(t);else{for(g=Je(t),d=g.indexOf("."),s?(p=2,16==n?a=4*a-3:8==n&&(a=3*a-2)):p=n,0<=d&&(g=g.replace(".",""),_=new o(1),_.e=g.length-d,_.d=Ye(Je(_),10,p),_.e=_.d.length),h=Ye(g,10,p),l=m=h.length;0==h[--m];)h.pop();if(!h[0])g=s?"0p+0":"0";else{if(0>d?l--:(t=new o(t),t.d=h,t.e=l,t=$n(t,_,a,r,0,p),h=t.d,l=t.e,u=P),d=h[a],c=p/2,u=u||void 0!==h[a+1],u=4>r?(void 0!==d||u)&&(0===r||r===(0>t.s?3:2)):d>c||d===c&&(4===r||u||6===r&&1&h[a-1]||r===(0>t.s?8:7)),h.length=a,u)for(;++h[--a]>p-1;)h[a]=0,a||(++l,h.unshift(1));for(m=h.length;!h[m-1];--m);for(d=0,g="";d<m;d++)g+="0123456789abcdef".charAt(h[d]);if(s){if(1<m)if(16==n||8==n){for(d=16==n?4:3,--m;m%d;m++)g+="0";for(h=Ye(g,p,n),m=h.length;!h[m-1];--m);for(d=1,g="1.";d<m;d++)g+="0123456789abcdef".charAt(h[d])}else g=g.charAt(0)+"."+g.slice(1);g=g+(0>l?"p":"p+")+l}else if(0>l){for(;++l;)g="0"+g;g="0."+g}else if(++l>m)for(l-=m;l--;)g+="0";else l<m&&(g=g.slice(0,l)+"."+g.slice(l))}g=(16==n?"0x":2==n?"0b":8==n?"0o":"")+g}return 0>t.s?"-"+g:g}function gt(e,t){if(e.length>t)return e.length=t,!0}function ht(e){return new this(e).abs()}function yt(e){return new this(e).acos()}function xt(e){return new this(e).acosh()}function _t(e,t){return new this(e).plus(t)}function ft(e){return new this(e).asin()}function vt(e){return new this(e).asinh()}function bt(e){return new this(e).atan()}function Mt(e){return new this(e).atanh()}function St(e,t){e=new this(e),t=new this(t);var n=this.precision,i=this.rounding,a=n+4,o;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(o=0>t.s?Qe(this,n,i):new this(0),o.s=e.s):!e.d||t.isZero()?(o=Qe(this,a,1).times(.5),o.s=e.s):0>t.s?(this.precision=a,this.rounding=1,o=this.atan($n(e,t,a,1)),t=Qe(this,a,1),this.precision=n,this.rounding=i,o=0>e.s?o.minus(t):o.plus(t)):o=this.atan($n(e,t,a,1)):(o=Qe(this,a,1).times(0<t.s?.25:.75),o.s=e.s):o=new this(NaN),o}function Nt(e){return new this(e).cbrt()}function zt(e){return Xe(e=new this(e),e.e+1,2)}function Et(e){if(!e||"object"!=typeof e)throw Error("[DecimalError] Object expected");var t=!0===e.defaults,n=["precision",1,1000000000,"rounding",0,8,"toExpNeg",-9000000000000000,0,"toExpPos",0,9000000000000000,"maxE",0,9000000000000000,"minE",-9000000000000000,0,"modulo",0,9],a,r,o;for(a=0;a<n.length;a+=3)if((r=n[a],t)&&(this[r]=Fn[r]),void 0!==(o=e[r]))if(Un(o)===o&&o>=n[a+1]&&o<=n[a+2])this[r]=o;else throw Error("[DecimalError] Invalid argument: "+r+": "+o);if((r="crypto",t)&&(this[r]=Fn[r]),void 0!==(o=e[r]))if(!0!==o&&!1!==o&&0!==o&&1!==o)throw Error("[DecimalError] Invalid argument: "+r+": "+o);else if(!o)this[r]=!1;else if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error("[DecimalError] crypto unavailable");return this}function Ct(e){return new this(e).cos()}function It(e){return new this(e).cosh()}function At(e){function n(a){var r=this,o,s,p;if(!(r instanceof n))return new n(a);if(r.constructor=n,a instanceof n)return r.s=a.s,void(Bn?!a.d||a.e>n.maxE?(r.e=NaN,r.d=null):a.e<n.minE?(r.e=0,r.d=[0]):(r.e=a.e,r.d=a.d.slice()):(r.e=a.e,r.d=a.d?a.d.slice():a.d));if(p=typeof a,"number"===p){if(0===a)return r.s=0>1/a?-1:1,r.e=0,void(r.d=[0]);if(0>a?(a=-a,r.s=-1):r.s=1,a===~~a&&1e7>a){for(o=0,s=a;10<=s;s/=10)o++;return void(Bn?o>n.maxE?(r.e=NaN,r.d=null):o<n.minE?(r.e=0,r.d=[0]):(r.e=o,r.d=[a]):(r.e=o,r.d=[a]))}return 0==0*a?st(r,a.toString()):(a||(r.s=NaN),r.e=NaN,void(r.d=null))}if("string"!==p)throw Error("[DecimalError] Invalid argument: "+a);return 45===(s=a.charCodeAt(0))?(a=a.slice(1),r.s=-1):(43===s&&(a=a.slice(1)),r.s=1),Yn.test(a)?st(r,a):pt(r,a)}var a,t,r;if(n.prototype=Kn,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=Et,n.clone=At,n.isDecimal=Ot,n.abs=ht,n.acos=yt,n.acosh=xt,n.add=_t,n.asin=ft,n.asinh=vt,n.atan=bt,n.atanh=Mt,n.atan2=St,n.cbrt=Nt,n.ceil=zt,n.cos=Ct,n.cosh=It,n.div=kt,n.exp=Dt,n.floor=jt,n.hypot=Pt,n.ln=wt,n.log=d,n.log10=m,n.log2=c,n.max=x,n.min=Tt,n.mod=Ft,n.mul=Bt,n.pow=Lt,n.random=Rt,n.round=Ut,n.sign=qt,n.sin=Zt,n.sinh=Ht,n.sqrt=Vt,n.sub=Yt,n.tan=Wt,n.tanh=Xt,n.trunc=Jt,void 0===e&&(e={}),e&&!0!==e.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],a=0;a<r.length;)e.hasOwnProperty(t=r[a++])||(e[t]=this[t]);return n.config(e),n}function kt(e,t){return new this(e).div(t)}function Dt(e){return new this(e).exp()}function jt(e){return Xe(e=new this(e),e.e+1,3)}function Pt(){var e=new this(0),a,r;for(Bn=!1,a=0;a<arguments.length;)if(r=new this(arguments[a++]),!r.d){if(r.s)return Bn=!0,new this(1/0);e=r}else e.d&&(e=e.plus(r.times(r)));return Bn=!0,e.sqrt()}function Ot(e){return e instanceof ei||e&&"[object Decimal]"===e.name||!1}function wt(e){return new this(e).ln()}function d(e,t){return new this(e).log(t)}function c(e){return new this(e).log(2)}function m(e){return new this(e).log(10)}function x(){return it(this,arguments,"lt")}function Tt(){return it(this,arguments,"gt")}function Ft(e,t){return new this(e).mod(t)}function Bt(e,t){return new this(e).mul(t)}function Lt(e,t){return new this(e).pow(t)}function Rt(t){var a=0,o=new this(1),r=[],s,p,l,c;if(void 0===t?t=this.precision:He(t,1,1000000000),l=hn(t/7),!this.crypto)for(;a<l;)r[a++]=0|1e7*Math.random();else if(crypto.getRandomValues)for(s=crypto.getRandomValues(new Uint32Array(l));a<l;)c=s[a],429e7<=c?s[a]=crypto.getRandomValues(new Uint32Array(1))[0]:r[a++]=c%1e7;else if(crypto.randomBytes){for(s=crypto.randomBytes(l*=4);a<l;)c=s[a]+(s[a+1]<<8)+(s[a+2]<<16)+((127&s[a+3])<<24),214e7<=c?crypto.randomBytes(4).copy(s,a):(r.push(c%1e7),a+=4);a=l/4}else throw Error("[DecimalError] crypto unavailable");for(l=r[--a],t%=7,l&&t&&(c=qn(10,7-t),r[a]=(0|l/c)*c);0===r[a];a--)r.pop();if(0>a)p=0,r=[0];else{for(p=-1;0===r[0];p-=7)r.shift();for(l=1,c=r[0];10<=c;c/=10)l++;7>l&&(p-=7-l)}return o.e=p,o.d=r,o}function Ut(e){return Xe(e=new this(e),e.e+1,this.rounding)}function qt(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Zt(e){return new this(e).sin()}function Ht(e){return new this(e).sinh()}function Vt(e){return new this(e).sqrt()}function Yt(e,t){return new this(e).sub(t)}function Wt(e){return new this(e).tan()}function Xt(e){return new this(e).tanh()}function Jt(e){return Xe(e=new this(e),e.e+1,1)}function Gt(e,t){return e&&"function"==typeof e.map?e.map(function(e){return Gt(e,t)}):t(e)}function Kt(e){return vn(e)}function Qt(e,t){return e+t}function $t(e,t){return e*t}function en(e){return-e}function tn(e,t,n){if(null===n||n===void 0)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var i=e.minus(t).abs();if(i.isZero())return!0;var a=e.constructor.max(e.abs(),t.abs());return i.lte(a.times(n))}return!1}function nn(e,t,n){return ue(e.re,t.re,n)&&ue(e.im,t.im,n)}function an(e,t){var n=e.size(),i=t.size();if(n.length!==i.length)throw new be(n.length,i.length)}function rn(){throw new Error("No \"bignumber\" implementation available")}function on(){throw new Error("No \"fraction\" implementation available")}function sn(){throw new Error("No \"matrix\" implementation available")}function pn(e,t,n){function i(e){for(var t=e,n=0,i=0;null!==t;)n+=t.offsetTop,i+=t.offsetLeft,t=t.offsetParent;return{top:n,left:i}}function a(e){var t=window.getComputedStyle(e),n=t.transform||"",i=t.transformOrigin||"",a={x:0,y:0},r=Ea([3,3]);if("none"!==n){var o=i.split(" ");a.x=parseInt(o[0]),a.y=parseInt(o[1]);var s=n.match(/\(([^)]*)\)/)[1],p=s.split(","),l=[];p.forEach(function(e){l.push(parseFloat(e.trim()))}),l=[[l[0],l[2],l[4]],[l[1],l[3],l[5]],[0,0,1]],r=Ua(l)}else r=[[1,0,0],[0,1,0],[0,0,1]];return{matrix:r,origin:a}}function r(n){return n.forEach(function(n){var i=n,a=i.temp,r=i.origin,o=i.vertex,s=o.left,p=o.top;e=e-s-r.x,t=t-p-r.y;var l=Pa(a,[e,t,1]);e=l[0]+r.x,t=l[1]+r.y}),{x:e,y:t}}var o=[];if(n instanceof Node)for(var s=n;null!==s&&1===s.nodeType;){var p=i(s),l=p.left,d=p.top,c=a(s),m=c.matrix,u=c.origin;0<o.length&&(o[0].vertex.left-=l,o[0].vertex.top-=d),o.unshift({temp:m,origin:u,vertex:{left:l,top:d}}),s=s.parentNode}else n instanceof Array&&(o=n);var g=r(o);return{x:g.x,y:g.y,data:o}}function ln(e){for(var t=0,n=0,i=e.parentElement;null!==i;){if(t+=i.scrollTop,n+=i.scrollLeft,"fixed"===getComputedStyle(i).position)return{parentScrollTop:t,parentScrollLeft:n};i=i.parentElement}return{parentScrollTop:t,parentScrollLeft:n}}e=e&&e.hasOwnProperty("default")?e["default"]:e;var Mn=function(){return Mn=Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},Mn.apply(this,arguments)},Sn="undefined"!=typeof window,Nn=Sn?window.navigator.userAgent.toLowerCase():"",i=!!Nn&&/msie|trident/.test(Nn),yn=function(e){return new Promise(function(t,n){if(!/^(http[s]?)|(data:image)/.test(e))return void n(new Error("\u56FE\u7247url\u683C\u5F0F\u4E0D\u6B63\u786E"));var i=new Image;i.src=e,i.onload=function(){t(i)},i.onerror=n,(i.complete||i.complete===void 0)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=e)})},zn=function(e){return document.querySelector(e)},$={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},En=Array.isArray,Cn=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze($)};ee(Cn,$,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var In="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,An=ne(function(e){(function(t,n){e.exports=n()})(In,function(){function e(){return!0}function t(){return!1}function n(){}function i(){function a(e){var t=q(K.types,function(t){return t.name===e});if(t)return t;if("any"===e)return X;var n=q(K.types,function(t){return t.name.toLowerCase()===e.toLowerCase()});throw new TypeError("Unknown type \""+e+"\""+(n?". Did you mean \""+n.name+"\"?":""))}function r(e){return e===X?999:K.types.indexOf(e)}function o(e){var t=q(K.types,function(t){return t.test(e)});if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function s(e,t){var n=o(e);if(t===n)return e;for(var a=0,r;a<K.conversions.length;a++)if(r=K.conversions[a],r.from===n&&r.to===t)return r.convert(e);throw new Error("Cannot convert from "+n+" to "+t)}function p(e){return e.map(function(e){var t=e.types.map(x);return(e.restParam?"...":"")+t.join("|")}).join(",")}function l(e,t){var n=0===e.indexOf("..."),i=n?3<e.length?e.slice(3):"any":e,o=i.split("|").map(P).filter(O).filter(j),s=z(t,o),p=o.map(function(e){var t=a(e);return{name:e,typeIndex:r(t),test:t.test,conversion:null,conversionIndex:-1}}),l=s.map(function(e){var n=a(e.from);return{name:e.from,typeIndex:r(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}});return{types:p.concat(l),restParam:n}}function d(e,t,n){var i=[];return""!==e.trim()&&(i=e.split(",").map(P).map(function(e,t,i){var a=l(e,n);if(a.restParam&&t!==i.length-1)throw new SyntaxError("Unexpected rest parameter \""+e+"\": only allowed for the last parameter");return a})),i.some(T)?null:{params:i,fn:t}}function c(e){var t=B(e);return!!t&&t.restParam}function m(e){return e.types.some(function(e){return null!=e.conversion})}function u(t){if(!t||0===t.types.length)return e;if(1===t.types.length)return a(t.types[0].name).test;if(2===t.types.length){var n=a(t.types[0].name).test,i=a(t.types[1].name).test;return function(e){return n(e)||i(e)}}var r=t.types.map(function(e){return a(e.name).test});return function(e){for(var t=0;t<r.length;t++)if(r[t](e))return!0;return!1}}function g(e){var t,n,i;if(c(e)){t=F(e).map(u);var a=t.length,r=u(B(e)),o=function(e){for(var t=a;t<e.length;t++)if(!r(e[t]))return!1;return!0};return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return o(e)&&e.length>=a+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=u(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=u(e[0]),i=u(e[1]),function(e){return n(e[0])&&i(e[1])&&2===e.length}):(t=e.map(u),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}function h(e,t){return t<e.params.length?e.params[t]:c(e.params)?B(e.params):null}function y(e,t,n){var i=h(e,t),a=i?n?i.types.filter(_):i.types:[];return a.map(x)}function x(e){return e.name}function _(e){return null===e.conversion||void 0===e.conversion}function f(e,t){var n=Z(H(e,function(e){return y(e,t,!1)}));return-1===n.indexOf("any")?n:["any"]}function v(e,t,n){var i=e||"unnamed",a=n,r,s,p;for(p=0;p<t.length;p++){var l=a.filter(function(e){var n=u(h(e,p));return(p<e.params.length||c(e.params))&&n(t[p])});if(0!==l.length)a=l;else if(s=f(a,p),0<s.length){var d=o(t[p]);return r=new TypeError("Unexpected type of argument in function "+i+" (expected: "+s.join(" or ")+", actual: "+d+", index: "+p+")"),r.data={category:"wrongType",fn:i,index:p,actual:d,expected:s},r}}var m=a.map(function(e){return c(e.params)?1/0:e.params.length});if(t.length<xn.apply(null,m))return s=f(a,p),r=new TypeError("Too few arguments in function "+i+" (expected: "+s.join(" or ")+", index: "+t.length+")"),r.data={category:"tooFewArgs",fn:i,index:t.length,expected:s},r;var g=fn.apply(null,m);return t.length>g?(r=new TypeError("Too many arguments in function "+i+" (expected: "+g+", actual: "+t.length+")"),r.data={category:"tooManyArgs",fn:i,index:t.length,expectedLength:g},r):(r=new TypeError("Arguments of type \""+t.join(", ")+"\" do not match any of the defined signatures of function "+i+"."),r.data={category:"mismatch",actual:t.map(o)},r)}function b(e){for(var t=999,n=0;n<e.types.length;n++)_(e.types[n])&&(t=xn(t,e.types[n].typeIndex));return t}function M(e){for(var t=999,n=0;n<e.types.length;n++)_(e.types[n])||(t=xn(t,e.types[n].conversionIndex));return t}function S(e,t){var n;return(n=e.restParam-t.restParam,0!==n)?n:(n=m(e)-m(t),0!==n)?n:(n=b(e)-b(t),0===n?M(e)-M(t):n)}function N(e,t){var n=xn(e.params.length,t.params.length),a,r;if(r=e.params.some(m)-t.params.some(m),0!==r)return r;for(a=0;a<n;a++)if(r=m(e.params[a])-m(t.params[a]),0!==r)return r;for(a=0;a<n;a++)if(r=S(e.params[a],t.params[a]),0!==r)return r;return e.params.length-t.params.length}function z(e,t){var n={};return e.forEach(function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||n[e.from]||(n[e.from]=e)}),Object.keys(n).map(function(e){return n[e]})}function E(e,t){var n=t;if(e.some(m)){var a=c(e),r=e.map(C);n=function(){for(var e=[],n=a?arguments.length-1:arguments.length,o=0;o<n;o++)e[o]=r[o](arguments[o]);return a&&(e[n]=arguments[n].map(r[n])),t.apply(this,e)}}var o=n;if(c(e)){var s=e.length-1;o=function(){return n.apply(this,L(arguments,0,s).concat([L(arguments,s)]))}}return o}function C(e){var t=[],n=[],i,r,o,s;switch(e.types.forEach(function(e){e.conversion&&(t.push(a(e.conversion.from).test),n.push(e.conversion.convert))}),n.length){case 0:return function(e){return e};case 1:return i=t[0],o=n[0],function(e){return i(e)?o(e):e};case 2:return i=t[0],r=t[1],o=n[0],s=n[1],function(e){return i(e)?o(e):r(e)?s(e):e};default:return function(e){for(var a=0;a<n.length;a++)if(t[a](e))return n[a](e);return e};}}function I(e){var t={};return e.forEach(function(e){e.params.some(m)||A(e.params,!0).forEach(function(n){t[p(n)]=e.fn})}),t}function A(e,t){function n(e,i,a){if(i<e.length){var r=e[i],o=t?r.types.filter(_):r.types,s;if(r.restParam){var p=o.filter(_);s=p.length<o.length?[p,o]:[o]}else s=o.map(function(e){return[e]});return H(s,function(t){return n(e,i+1,a.concat([t]))})}var l=a.map(function(t,n){return{types:t,restParam:n===e.length-1&&c(e)}});return[l]}return n(e,0,[])}function k(e,t){for(var n=fn(e.params.length,t.params.length),a=0;a<n;a++){var r=y(e,a,!0),o=y(t,a,!0);if(!U(r,o))return!1}var s=e.params.length,p=t.params.length,l=c(e.params),d=c(t.params);return l?d?s===p:p>=s:d?s>=p:s===p}function D(e,i){if(0===Object.keys(i).length)throw new SyntaxError("No signatures provided");var a=[];Object.keys(i).map(function(e){return d(e,i[e],K.conversions)}).filter(w).forEach(function(e){var t=q(a,function(t){return k(t,e)});if(t)throw new TypeError("Conflicting signatures \""+p(t.params)+"\" and \""+p(e.params)+"\".");a.push(e)});var r=H(a,function(e){var t=e?A(e.params,!1):[];return t.map(function(t){return{params:t,fn:e.fn}})}).filter(w);r.sort(N);var o=r[0]&&2>=r[0].params.length&&!c(r[0].params),s=r[1]&&2>=r[1].params.length&&!c(r[1].params),l=r[2]&&2>=r[2].params.length&&!c(r[2].params),m=r[3]&&2>=r[3].params.length&&!c(r[3].params),h=r[4]&&2>=r[4].params.length&&!c(r[4].params),y=r[5]&&2>=r[5].params.length&&!c(r[5].params),x=r.map(function(e){return g(e.params)}),_=o?u(r[0].params[0]):t,f=s?u(r[1].params[0]):t,b=l?u(r[2].params[0]):t,M=m?u(r[3].params[0]):t,S=h?u(r[4].params[0]):t,z=y?u(r[5].params[0]):t,C=o?u(r[0].params[1]):t,D=s?u(r[1].params[1]):t,j=l?u(r[2].params[1]):t,P=m?u(r[3].params[1]):t,O=h?u(r[4].params[1]):t,T=y?u(r[5].params[1]):t,F=r.map(function(e){return E(e.params,e.fn)}),B=o?F[0]:n,L=s?F[1]:n,R=l?F[2]:n,U=m?F[3]:n,Z=h?F[4]:n,V=y?F[5]:n,Y=o?r[0].params.length:-1,W=s?r[1].params.length:-1,X=l?r[2].params.length:-1,J=m?r[3].params.length:-1,G=h?r[4].params.length:-1,Q=y?r[5].params.length:-1,$=o&&s&&l&&m&&h&&y?6:0,ee=r.length,te=function(){for(var t=$;t<ee;t++)if(x[t](arguments))return F[t].apply(this,arguments);throw v(e,arguments,r)},ne=function e(t,n){return arguments.length===Y&&_(t)&&C(n)?B.apply(e,arguments):arguments.length===W&&f(t)&&D(n)?L.apply(e,arguments):arguments.length===X&&b(t)&&j(n)?R.apply(e,arguments):arguments.length===J&&M(t)&&P(n)?U.apply(e,arguments):arguments.length===G&&S(t)&&O(n)?Z.apply(e,arguments):arguments.length===Q&&z(t)&&T(n)?V.apply(e,arguments):te.apply(e,arguments)};try{Object.defineProperty(ne,"name",{value:e})}catch(e){}return ne.signatures=I(r),ne}function j(e){return-1===K.ignore.indexOf(e)}function P(e){return e.trim()}function O(e){return!!e}function w(e){return null!==e}function T(e){return 0===e.types.length}function F(e){return e.slice(0,e.length-1)}function B(e){return e[e.length-1]}function L(e,t,n){return Array.prototype.slice.call(e,t,n)}function R(e,t){return-1!==e.indexOf(t)}function U(e,t){for(var n=0;n<e.length;n++)if(R(t,e[n]))return!0;return!1}function q(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function Z(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}function H(e,t){return Array.prototype.concat.apply([],e.map(t))}function V(e){for(var t="",n=0,a;n<e.length;n++)if(a=e[n],("object"==typeof a.signatures||"string"==typeof a.signature)&&""!==a.name)if(""===t)t=a.name;else if(t!==a.name){var r=new Error("Function names do not match (expected: "+t+", actual: "+a.name+")");throw r.data={actual:a.name,expected:t},r}return t}function Y(e){function t(e,t){if(n.hasOwnProperty(e)&&t!==n[e])throw r=new Error("Signature \""+e+"\" is defined twice"),r.data={signature:e},r}for(var n={},a=0,r,o;a<e.length;a++)if(o=e[a],"object"==typeof o.signatures)for(var s in o.signatures)o.signatures.hasOwnProperty(s)&&(t(s,o.signatures[s]),n[s]=o.signatures[s]);else if("string"==typeof o.signature)t(o.signature,o),n[o.signature]=o;else throw r=new TypeError("Function is no typed-function (index: "+a+")"),r.data={index:a},r;return n}var W=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],X={name:"any",test:e},J=[],G=[],K={types:W,conversions:G,ignore:J};return K=D("typed",{"string, Object":D,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);var i=V(t);return D(i,e)},"...Function":function(e){return D(V(e),Y(e))},"string, ...Function":function(e,t){return D(e,Y(t))}}),K.create=i,K.types=W,K.conversions=G,K.ignore=J,K.convert=s,K.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var a=0;a<n.length;a++)n[a]=n[a].trim()}else if(Array.isArray(t))n=t;else throw new TypeError("String array or a comma separated string expected");var r=n.join(","),o=e.signatures[r];if(o)return o;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")},K.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<K.types.length;n++)if("Object"===K.types[n].name)return void K.types.splice(n,0,e);K.types.push(e)},K.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");K.conversions.push(e)},K}return i()})}),kn=Number.EPSILON||2220446049250313e-31;be.prototype=new RangeError,be.prototype.constructor=RangeError,be.prototype.name="DimensionError",be.prototype.isDimensionError=!0,Me.prototype=new RangeError,Me.prototype.constructor=RangeError,Me.prototype.name="IndexError",Me.prototype.isIndexError=!0;var Dn=function(){return Dn=An.create,An},jn=we("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:d}=e,c=Dn();return c.types=[{name:"number",test:a},{name:"Complex",test:o},{name:"BigNumber",test:r},{name:"Fraction",test:s},{name:"Unit",test:p},{name:"string",test:l},{name:"Chain",test:V},{name:"Array",test:En},{name:"Matrix",test:u},{name:"DenseMatrix",test:h},{name:"SparseMatrix",test:y},{name:"Range",test:_},{name:"Index",test:f},{name:"boolean",test:v},{name:"ResultSet",test:b},{name:"Help",test:M},{name:"function",test:S},{name:"Date",test:N},{name:"RegExp",test:z},{name:"null",test:C},{name:"undefined",test:I},{name:"AccessorNode",test:A},{name:"ArrayNode",test:k},{name:"AssignmentNode",test:D},{name:"BlockNode",test:j},{name:"ConditionalNode",test:O},{name:"ConstantNode",test:w},{name:"FunctionNode",test:F},{name:"FunctionAssignmentNode",test:T},{name:"IndexNode",test:B},{name:"Node",test:L},{name:"ObjectNode",test:R},{name:"OperatorNode",test:U},{name:"ParenthesisNode",test:q},{name:"RangeNode",test:Z},{name:"SymbolNode",test:H},{name:"Object",test:E}],c.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||Le(e),15<me(e))throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||Re(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||Re(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||Re(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){d||qe(e);var t=new d(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=+e;if(isNaN(t))throw new Error("Cannot convert \""+e+"\" to a number");return t}},{from:"string",to:"BigNumber",convert:function(e){t||Le(e);try{return new t(e)}catch(t){throw new Error("Cannot convert \""+e+"\" to BigNumber")}}},{from:"string",to:"Fraction",convert:function(e){d||qe(e);try{return new d(e)}catch(t){throw new Error("Cannot convert \""+e+"\" to Fraction")}}},{from:"string",to:"Complex",convert:function(e){n||Re(e);try{return new n(e)}catch(t){throw new Error("Cannot convert \""+e+"\" to Complex")}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||Le(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return d||qe(e),new d(+e)}},{from:"boolean",to:"string",convert:function(e){return e+""}},{from:"Array",to:"Matrix",convert:function(e){return i||Ue(),new i(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],c}),Pn=9e15,On=1e9,wn="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Tn="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Fn={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Pn,maxE:Pn,crypto:!1},Bn=!0,Ln="[DecimalError] ",Rn=Ln+"Invalid argument: ",Un=cn,qn=_n,Zn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Hn=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Vn=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Yn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wn=1e7,Xn=7,Jn=wn.length-1,Gn=Tn.length-1,Kn={name:"[object Decimal]"},P,Qn;Kn.absoluteValue=Kn.abs=function(){var e=new this.constructor(this);return 0>e.s&&(e.s=1),Xe(e)},Kn.ceil=function(){return Xe(new this.constructor(this),this.e+1,2)},Kn.comparedTo=Kn.cmp=function(e){var t=this,n=t.d,a=(e=new t.constructor(e)).d,r=t.s,o=e.s,s,p,l,d;if(!n||!a)return r&&o?r===o?n===a?0:!n^0>r?1:-1:r:NaN;if(!n[0]||!a[0])return n[0]?r:a[0]?-o:0;if(r!==o)return r;if(t.e!==e.e)return t.e>e.e^0>r?1:-1;for(l=n.length,d=a.length,(s=0,p=l<d?l:d);s<p;++s)if(n[s]!==a[s])return n[s]>a[s]^0>r?1:-1;return l===d?0:l>d^0>r?1:-1},Kn.cosine=Kn.cos=function(){var e=this,t=e.constructor,n,i;return e.d?e.d[0]?(n=t.precision,i=t.rounding,t.precision=n+fn(e.e,e.sd())+Xn,t.rounding=1,e=We(t,mt(t,e)),t.precision=n,t.rounding=i,Xe(2==Qn||3==Qn?e.neg():e,n,i,!0)):new t(1):new t(NaN)},Kn.cubeRoot=Kn.cbrt=function(){var i=this,a=i.constructor,o,p,l,d,c,u,g,h,y,x;if(!i.isFinite()||i.isZero())return new a(i);for(Bn=!1,u=i.s*qn(i.s*i,1/3),u&&vn(u)!=1/0?d=new a(u.toString()):(l=Ze(i.d),o=i.e,(u=(o-l.length+1)%3)&&(l+=1==u||-2==u?"0":"00"),u=qn(l,1/3),o=Un((o+1)/3)-(o%3==(0>o?-1:2)),u==1/0?l="5e"+o:(l=u.toExponential(),l=l.slice(0,l.indexOf("e")+1)+o),d=new a(l),d.s=i.s),g=(o=a.precision)+3;;)if(h=d,y=h.times(h).times(h),x=y.plus(i),d=$n(x.plus(i).times(h),x.plus(y),g+2,1),Ze(h.d).slice(0,g)===(l=Ze(d.d)).slice(0,g))if(l=l.slice(g-3,g+1),"9999"==l||!c&&"4999"==l){if(!c&&(Xe(h,o+1,0),h.times(h).times(h).eq(i))){d=h;break}g+=4,c=1}else{+l&&(+l.slice(1)||"5"!=l.charAt(0))||(Xe(d,o+1,1),p=!d.times(d).times(d).eq(i));break}return Bn=!0,Xe(d,o,a.rounding,p)},Kn.decimalPlaces=Kn.dp=function(){var e=this.d,t=NaN,i;if(e){if(i=e.length-1,t=(i-Un(this.e/Xn))*Xn,i=e[i],i)for(;0==i%10;i/=10)t--;0>t&&(t=0)}return t},Kn.dividedBy=Kn.div=function(e){return $n(this,new this.constructor(e))},Kn.dividedToIntegerBy=Kn.divToInt=function(e){var t=this,n=t.constructor;return Xe($n(t,new n(e),0,1,1),n.precision,n.rounding)},Kn.equals=Kn.eq=function(e){return 0===this.cmp(e)},Kn.floor=function(){return Xe(new this.constructor(this),this.e+1,3)},Kn.greaterThan=Kn.gt=function(e){return 0<this.cmp(e)},Kn.greaterThanOrEqualTo=Kn.gte=function(e){var t=this.cmp(e);return 1==t||0===t},Kn.hyperbolicCosine=Kn.cosh=function(){var e=this,t=e.constructor,a=new t(1),r,o,s,p,l;if(!e.isFinite())return new t(e.s?1/0:NaN);if(e.isZero())return a;s=t.precision,p=t.rounding,t.precision=s+fn(e.e,e.sd())+4,t.rounding=1,l=e.d.length,32>l?(r=hn(l/3),o=(1/ct(4,r)).toString()):(r=16,o="2.3283064365386962890625e-10"),e=dt(t,1,e.times(o),new t(1),!0);for(var d=r,c=new t(8),m;d--;)m=e.times(e),e=a.minus(m.times(c.minus(m.times(c))));return Xe(e,t.precision=s,t.rounding=p,!0)},Kn.hyperbolicSine=Kn.sinh=function(){var e=this,t=e.constructor,n,i,a,r;if(!e.isFinite()||e.isZero())return new t(e);if(i=t.precision,a=t.rounding,t.precision=i+fn(e.e,e.sd())+4,t.rounding=1,r=e.d.length,3>r)e=dt(t,2,e,e,!0);else{n=1.4*mn(r),n=16<n?16:0|n,e=e.times(1/ct(5,n)),e=dt(t,2,e,e,!0);for(var o=new t(5),s=new t(16),p=new t(20),l;n--;)l=e.times(e),e=e.times(o.plus(l.times(s.times(l).plus(p))))}return t.precision=i,t.rounding=a,Xe(e,i,a,!0)},Kn.hyperbolicTangent=Kn.tanh=function(){var e=this,t=e.constructor,n,i;return e.isFinite()?e.isZero()?new t(e):(n=t.precision,i=t.rounding,t.precision=n+7,t.rounding=1,$n(e.sinh(),e.cosh(),t.precision=n,t.rounding=i)):new t(e.s)},Kn.inverseCosine=Kn.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),i=t.precision,a=t.rounding,r;return-1===n?e.isZero()?Qe(t,i+4,a).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),r=Qe(t,i+4,a).times(.5),t.precision=i,t.rounding=a,r.minus(e)):0===n?e.isNeg()?Qe(t,i,a):new t(0):new t(NaN)},Kn.inverseHyperbolicCosine=Kn.acosh=function(){var e=this,t=e.constructor,n,i;return e.lte(1)?new t(e.eq(1)?0:NaN):e.isFinite()?(n=t.precision,i=t.rounding,t.precision=n+fn(vn(e.e),e.sd())+4,t.rounding=1,Bn=!1,e=e.times(e).minus(1).sqrt().plus(e),Bn=!0,t.precision=n,t.rounding=i,e.ln()):new t(e)},Kn.inverseHyperbolicSine=Kn.asinh=function(){var e=this,t=e.constructor,n,i;return!e.isFinite()||e.isZero()?new t(e):(n=t.precision,i=t.rounding,t.precision=n+2*fn(vn(e.e),e.sd())+6,t.rounding=1,Bn=!1,e=e.times(e).plus(1).sqrt().plus(e),Bn=!0,t.precision=n,t.rounding=i,e.ln())},Kn.inverseHyperbolicTangent=Kn.atanh=function(){var e=this,t=e.constructor,n,i,a,r;return e.isFinite()?0<=e.e?new t(e.abs().eq(1)?e.s/0:e.isZero()?e:NaN):(n=t.precision,i=t.rounding,r=e.sd(),fn(r,n)<2*-e.e-1)?Xe(new t(e),n,i,!0):(t.precision=a=r-e.e,e=$n(e.plus(1),new t(1).minus(e),a+n,1),t.precision=n+4,t.rounding=1,e=e.ln(),t.precision=n,t.rounding=i,e.times(.5)):new t(NaN)},Kn.inverseSine=Kn.asin=function(){var e=this,t=e.constructor,n,i,a,r;return e.isZero()?new t(e):(i=e.abs().cmp(1),a=t.precision,r=t.rounding,-1!==i)?0===i?(n=Qe(t,a+4,r).times(.5),n.s=e.s,n):new t(NaN):(t.precision=a+6,t.rounding=1,e=e.div(new t(1).minus(e.times(e)).sqrt().plus(1)).atan(),t.precision=a,t.rounding=r,e.times(2))},Kn.inverseTangent=Kn.atan=function(){var e=this,a=e.constructor,o=a.precision,s=a.rounding,p,l,d,c,m,u,g,h,y;if(!e.isFinite()){if(!e.s)return new a(NaN);if(o+4<=Gn)return g=Qe(a,o+4,s).times(.5),g.s=e.s,g}else{if(e.isZero())return new a(e);if(e.abs().eq(1)&&o+4<=Gn)return g=Qe(a,o+4,s).times(.25),g.s=e.s,g}for(a.precision=h=o+10,a.rounding=1,d=xn(28,0|h/Xn+2),p=d;p;--p)e=e.div(e.times(e).plus(1).sqrt().plus(1));for(Bn=!1,l=hn(h/Xn),c=1,y=e.times(e),g=new a(e),m=e;-1!==p;)if(m=m.times(y),u=g.minus(m.div(c+=2)),m=m.times(y),g=u.plus(m.div(c+=2)),void 0!==g.d[l])for(p=l;g.d[p]===u.d[p]&&p--;);return d&&(g=g.times(2<<d-1)),Bn=!0,Xe(g,a.precision=o,a.rounding=s,!0)},Kn.isFinite=function(){return!!this.d},Kn.isInteger=Kn.isInt=function(){return!!this.d&&Un(this.e/Xn)>this.d.length-2},Kn.isNaN=function(){return!this.s},Kn.isNegative=Kn.isNeg=function(){return 0>this.s},Kn.isPositive=Kn.isPos=function(){return 0<this.s},Kn.isZero=function(){return!!this.d&&0===this.d[0]},Kn.lessThan=Kn.lt=function(e){return 0>this.cmp(e)},Kn.lessThanOrEqualTo=Kn.lte=function(e){return 1>this.cmp(e)},Kn.logarithm=Kn.log=function(e){var t=this,n=t.constructor,i=n.precision,a=n.rounding,o,s,p,l,c,m,u,g;if(null==e)e=new n(10),o=!0;else{if(e=new n(e),s=e.d,0>e.s||!s||!s[0]||e.eq(1))return new n(NaN);o=e.eq(10)}if(s=t.d,0>t.s||!s||!s[0]||t.eq(1))return new n(s&&!s[0]?-1/0:1==t.s?s?0:1/0:NaN);if(o)if(1<s.length)c=!0;else{for(l=s[0];0==l%10;)l/=10;c=1!==l}if(Bn=!1,u=i+5,m=rt(t,u),p=o?Ke(n,u+10):rt(e,u),g=$n(m,p,u,1),Ve(g.d,l=i,a))do if(u+=10,m=rt(t,u),p=o?Ke(n,u+10):rt(e,u),g=$n(m,p,u,1),!c){1e14==+Ze(g.d).slice(l+1,l+15)+1&&(g=Xe(g,i+1,0));break}while(Ve(g.d,l+=10,a));return Bn=!0,Xe(g,i,a)},Kn.minus=Kn.sub=function(t){var n=this,a=n.constructor,r,o,s,p,l,c,m,u,g,h,x,_;if(t=new a(t),!n.d||!t.d)return n.s&&t.s?n.d?t.s=-t.s:t=new a(t.d||n.s!==t.s?n:NaN):t=new a(NaN),t;if(n.s!=t.s)return t.s=-t.s,n.plus(t);if(g=n.d,_=t.d,m=a.precision,u=a.rounding,!g[0]||!_[0]){if(_[0])t.s=-t.s;else if(g[0])t=new a(n);else return new a(3===u?-0:0);return Bn?Xe(t,m,u):t}if(o=Un(t.e/Xn),h=Un(n.e/Xn),g=g.slice(),l=h-o,l){for(x=0>l,x?(r=g,l=-l,c=_.length):(r=_,o=h,c=g.length),s=fn(hn(m/Xn),c)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=g.length,c=_.length,x=s<c,x&&(c=s),s=0;s<c;s++)if(g[s]!=_[s]){x=g[s]<_[s];break}l=0}for(x&&(r=g,g=_,_=r,t.s=-t.s),c=g.length,s=_.length-c;0<s;--s)g[c++]=0;for(s=_.length;s>l;){if(g[--s]<_[s]){for(p=s;p&&0===g[--p];)g[p]=Wn-1;--g[p],g[s]+=Wn}g[s]-=_[s]}for(;0===g[--c];)g.pop();for(;0===g[0];g.shift())--o;return g[0]?(t.d=g,t.e=Ge(g,o),Bn?Xe(t,m,u):t):new a(3===u?-0:0)},Kn.modulo=Kn.mod=function(e){var t=this,n=t.constructor,i;return(e=new n(e),!t.d||!e.s||e.d&&!e.d[0])?new n(NaN):e.d&&(!t.d||t.d[0])?(Bn=!1,9==n.modulo?(i=$n(t,e.abs(),0,3,1),i.s*=e.s):i=$n(t,e,0,n.modulo,1),i=i.times(e),Bn=!0,t.minus(i)):Xe(new n(t),n.precision,n.rounding)},Kn.naturalExponential=Kn.exp=function(){return at(this)},Kn.naturalLogarithm=Kn.ln=function(){return rt(this)},Kn.negated=Kn.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Xe(e)},Kn.plus=Kn.add=function(t){var n=this,a=n.constructor,r,o,s,p,l,c,m,u,g,h;if(t=new a(t),!n.d||!t.d)return n.s&&t.s?!n.d&&(t=new a(t.d||n.s===t.s?n:NaN)):t=new a(NaN),t;if(n.s!=t.s)return t.s=-t.s,n.minus(t);if(g=n.d,h=t.d,m=a.precision,u=a.rounding,!g[0]||!h[0])return h[0]||(t=new a(n)),Bn?Xe(t,m,u):t;if(l=Un(n.e/Xn),s=Un(t.e/Xn),g=g.slice(),p=l-s,p){for(0>p?(o=g,p=-p,c=h.length):(o=h,s=l,c=g.length),l=hn(m/Xn),c=l>c?l+1:c+1,p>c&&(p=c,o.length=1),o.reverse();p--;)o.push(0);o.reverse()}for(c=g.length,p=h.length,0>c-p&&(p=c,o=h,h=g,g=o),r=0;p;)r=0|(g[--p]=g[p]+h[p]+r)/Wn,g[p]%=Wn;for(r&&(g.unshift(r),++s),c=g.length;0==g[--c];)g.pop();return t.d=g,t.e=Ge(g,s),Bn?Xe(t,m,u):t},Kn.precision=Kn.sd=function(e){var t=this,n;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Rn+e);return t.d?(n=$e(t.d),e&&t.e+1>n&&(n=t.e+1)):n=NaN,n},Kn.round=function(){var e=this,t=e.constructor;return Xe(new t(e),e.e+1,t.rounding)},Kn.sine=Kn.sin=function(){var e=this,t=e.constructor,n,i;return e.isFinite()?e.isZero()?new t(e):(n=t.precision,i=t.rounding,t.precision=n+fn(e.e,e.sd())+Xn,t.rounding=1,e=lt(t,mt(t,e)),t.precision=n,t.rounding=i,Xe(2<Qn?e.neg():e,n,i,!0)):new t(NaN)},Kn.squareRoot=Kn.sqrt=function(){var i=this,a=i.d,o=i.e,p=i.s,l=i.constructor,d,c,u,g,h,y;if(1!==p||!a||!a[0])return new l(!p||0>p&&(!a||a[0])?NaN:a?i:1/0);for(Bn=!1,p=mn(+i),0==p||p==1/0?(c=Ze(a),0==(c.length+o)%2&&(c+="0"),p=mn(c),o=Un((o+1)/2)-(0>o||o%2),p==1/0?c="5e"+o:(c=p.toExponential(),c=c.slice(0,c.indexOf("e")+1)+o),g=new l(c)):g=new l(p.toString()),u=(o=l.precision)+3;;)if(y=g,g=y.plus($n(i,y,u+2,1)).times(.5),Ze(y.d).slice(0,u)===(c=Ze(g.d)).slice(0,u))if(c=c.slice(u-3,u+1),"9999"==c||!h&&"4999"==c){if(!h&&(Xe(y,o+1,0),y.times(y).eq(i))){g=y;break}u+=4,h=1}else{+c&&(+c.slice(1)||"5"!=c.charAt(0))||(Xe(g,o+1,1),d=!g.times(g).eq(i));break}return Bn=!0,Xe(g,o,l.rounding,d)},Kn.tangent=Kn.tan=function(){var e=this,t=e.constructor,n,i;return e.isFinite()?e.isZero()?new t(e):(n=t.precision,i=t.rounding,t.precision=n+10,t.rounding=1,e=e.sin(),e.s=1,e=$n(e,new t(1).minus(e.times(e)).sqrt(),n+10,0),t.precision=n,t.rounding=i,Xe(2==Qn||4==Qn?e.neg():e,n,i,!0)):new t(NaN)},Kn.times=Kn.mul=function(n){var a=this,o=a.constructor,s=a.d,p=(n=new o(n)).d,l,d,c,m,u,g,h,x,_;if(n.s*=a.s,!s||!s[0]||!p||!p[0])return new o(n.s&&(!s||s[0]||p)&&(!p||p[0]||s)?s&&p?0*n.s:n.s/0:NaN);for(d=Un(a.e/Xn)+Un(n.e/Xn),x=s.length,_=p.length,x<_&&(u=s,s=p,p=u,g=x,x=_,_=g),u=[],g=x+_,c=g;c--;)u.push(0);for(c=_;0<=--c;){for(l=0,m=x+c;m>c;)h=u[m]+p[c]*s[m-c-1]+l,u[m--]=0|h%Wn,l=0|h/Wn;u[m]=0|(u[m]+l)%Wn}for(;!u[--g];)u.pop();return l?++d:u.shift(),n.d=u,n.e=Ge(u,d),Bn?Xe(n,o.precision,o.rounding):n},Kn.toBinary=function(e,t){return ut(this,2,e,t)},Kn.toDecimalPlaces=Kn.toDP=function(e,t){var n=this,i=n.constructor;return(n=new i(n),void 0===e)?n:(He(e,0,On),void 0===t?t=i.rounding:He(t,0,8),Xe(n,e+n.e+1,t))},Kn.toExponential=function(e,t){var n=this,i=n.constructor,a;return void 0===e?a=Je(n,!0):(He(e,0,On),void 0===t?t=i.rounding:He(t,0,8),n=Xe(new i(n),e+1,t),a=Je(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+a:a},Kn.toFixed=function(e,t){var n=this,i=n.constructor,a,r;return void 0===e?a=Je(n):(He(e,0,On),void 0===t?t=i.rounding:He(t,0,8),r=Xe(new i(n),e+n.e+1,t),a=Je(r,!1,e+r.e+1)),n.isNeg()&&!n.isZero()?"-"+a:a},Kn.toFraction=function(t){var i=this,a=i.d,o=i.constructor,s,p,l,c,m,u,g,h,y,x,_,f;if(!a)return new o(i);if(y=p=new o(1),l=h=new o(0),s=new o(l),m=s.e=$e(a)-i.e-1,u=m%Xn,s.d[0]=qn(10,0>u?Xn+u:u),null==t)t=0<m?s:y;else{if(g=new o(t),!g.isInt()||g.lt(y))throw Error(Rn+g);t=g.gt(s)?0<m?s:y:g}for(Bn=!1,g=new o(Ze(a)),x=o.precision,o.precision=m=2*(a.length*Xn);;){if(_=$n(g,s,0,1,1),c=p.plus(_.times(l)),1==c.cmp(t))break;p=l,l=c,c=y,y=h.plus(_.times(c)),h=c,c=s,s=g.minus(_.times(c)),g=c}return c=$n(t.minus(p),l,0,1,1),h=h.plus(c.times(y)),p=p.plus(c.times(l)),h.s=y.s=i.s,f=1>$n(y,l,m,1).minus(i).abs().cmp($n(h,p,m,1).minus(i).abs())?[y,l]:[h,p],o.precision=x,Bn=!0,f},Kn.toHexadecimal=Kn.toHex=function(e,t){return ut(this,16,e,t)},Kn.toNearest=function(e,t){var n=this,i=n.constructor;if(n=new i(n),null==e){if(!n.d)return n;e=new i(1),t=i.rounding}else{if(e=new i(e),void 0===t?t=i.rounding:He(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Bn=!1,n=$n(n,e,0,t,1).times(e),Bn=!0,Xe(n)):(e.s=n.s,n=e),n},Kn.toNumber=function(){return+this},Kn.toOctal=function(e,t){return ut(this,8,e,t)},Kn.toPower=Kn.pow=function(t){var n=this,i=n.constructor,a=+(t=new i(t)),o,p,l,d,c,m;if(!n.d||!t.d||!n.d[0]||!t.d[0])return new i(qn(+n,a));if(n=new i(n),n.eq(1))return n;if(l=i.precision,c=i.rounding,t.eq(1))return Xe(n,l,c);if(o=Un(t.e/Xn),o>=t.d.length-1&&(p=0>a?-a:a)<=9007199254740991)return d=tt(i,n,p,l),0>t.s?new i(1).div(d):Xe(d,l,c);if(m=n.s,0>m){if(o<t.d.length-1)return new i(NaN);if(0==(1&t.d[o])&&(m=1),0==n.e&&1==n.d[0]&&1==n.d.length)return n.s=m,n}return(p=qn(+n,a),o=0!=p&&isFinite(p)?new i(p+"").e:Un(a*(gn("0."+Ze(n.d))/un+n.e+1)),o>i.maxE+1||o<i.minE-1)?new i(0<o?m/0:0):(Bn=!1,i.rounding=n.s=1,p=xn(12,(o+"").length),d=at(t.times(rt(n,l+p)),l),d.d&&(d=Xe(d,l+5,1),Ve(d.d,l,c)&&(o=l+10,d=Xe(at(t.times(rt(n,o+p)),o),o+5,1),1e14==+Ze(d.d).slice(l+1,l+15)+1&&(d=Xe(d,l+1,0)))),d.s=m,Bn=!0,i.rounding=c,Xe(d,l,c))},Kn.toPrecision=function(e,t){var n=this,i=n.constructor,a;return void 0===e?a=Je(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(He(e,1,On),void 0===t?t=i.rounding:He(t,0,8),n=Xe(new i(n),e,t),a=Je(n,e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+a:a},Kn.toSignificantDigits=Kn.toSD=function(e,t){var n=this,i=n.constructor;return void 0===e?(e=i.precision,t=i.rounding):(He(e,1,On),void 0===t?t=i.rounding:He(t,0,8)),Xe(new i(n),e,t)},Kn.toString=function(){var e=this,t=e.constructor,n=Je(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},Kn.truncated=Kn.trunc=function(){return Xe(new this.constructor(this),this.e+1,1)},Kn.valueOf=Kn.toJSON=function(){var e=this,t=e.constructor,n=Je(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var $n=function(){function e(e,t,n){var a=0,r=e.length,o;for(e=e.slice();r--;)o=e[r]*t+a,e[r]=0|o%n,a=0|o/n;return a&&e.unshift(a),e}function t(e,t,n,a){var o,s;if(n!=a)s=n>a?1:-1;else for(o=s=0;o<n;o++)if(e[o]!=t[o]){s=e[o]>t[o]?1:-1;break}return s}function n(e,t,n,a){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*a+e[n]-t[n];for(;!e[0]&&1<e.length;)e.shift()}return function(a,r,o,s,p,l){var d=a.constructor,c=a.s==r.s?1:-1,m=a.d,u=r.d,g,h,y,x,_,f,v,b,M,S,N,z,E,C,I,A,D,j,O,w;if(!m||!m[0]||!u||!u[0])return new d(a.s&&r.s&&(m?!(u&&m[0]==u[0]):!!u)?m&&0==m[0]||!u?0*c:c/0:NaN);for(l?(_=1,h=a.e-r.e):(l=Wn,_=Xn,h=Un(a.e/_)-Un(r.e/_)),O=u.length,D=m.length,M=new d(c),S=M.d=[],y=0;u[y]==(m[y]||0);y++);if(u[y]>(m[y]||0)&&h--,null==o?(C=o=d.precision,s=d.rounding):p?C=o+(a.e-r.e)+1:C=o,0>C)S.push(1),f=!0;else{if(C=0|C/_+2,y=0,1==O){for(x=0,u=u[0],C++;(y<D||x)&&C--;y++)I=x*l+(m[y]||0),S[y]=0|I/u,x=0|I%u;f=x||y<D}else{for(x=0|l/(u[0]+1),1<x&&(u=e(u,x,l),m=e(m,x,l),O=u.length,D=m.length),A=O,N=m.slice(0,O),z=N.length;z<O;)N[z++]=0;w=u.slice(),w.unshift(0),j=u[0],u[1]>=l/2&&++j;do x=0,g=t(u,N,O,z),0>g?(E=N[0],O!=z&&(E=E*l+(N[1]||0)),x=0|E/j,1<x?(x>=l&&(x=l-1),v=e(u,x,l),b=v.length,z=N.length,g=t(v,N,b,z),1==g&&(x--,n(v,O<b?w:u,b,l))):(0==x&&(g=x=1),v=u.slice()),b=v.length,b<z&&v.unshift(0),n(N,v,z,l),-1==g&&(z=N.length,g=t(u,N,O,z),1>g&&(x++,n(N,O<z?w:u,z,l))),z=N.length):0===g&&(x++,N=[0]),S[y++]=x,g&&N[0]?N[z++]=m[A]||0:(N=[m[A]],z=1);while((A++<D||void 0!==N[0])&&C--);f=void 0!==N[0]}S[0]||S.shift()}if(1==_)M.e=h,P=f;else{for(y=1,x=S[0];10<=x;x/=10)y++;M.e=y+h*_-1,Xe(M,p?o+M.e+1:o,s,f)}return M}}();Kn[Symbol.for("nodejs.util.inspect.custom")]=Kn.toString,Kn[Symbol.toStringTag]="Decimal";var ei=At(Fn);wn=new ei(wn),Tn=new ei(Tn);var ti=we("BigNumber",["?on","config"],e=>{var{on:t,config:n}=e,i=ei.clone({precision:n.precision,modulo:9});return i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(e){return new i(e.value)},t&&t("config",function(e,t){e.precision!==t.precision&&i.config({precision:e.precision})}),i},{isClass:!0}),ni=ne(function(e,t){(function(){var r=Math.sin,o=Math.exp,s=Math.cos,p=Math.atan2;function n(e,t){var n=vn(e),i=vn(t);return 0===e?gn(i):0===t?gn(n):3e3>n&&3e3>i?.5*gn(e*e+t*t):gn(e/s(p(t,e)))}function i(e,t){if(!(this instanceof i))return new i(e,t);var n=h(e,t);this.re=n.re,this.im=n.im}var l=function(e){return .5*(o(e)+o(-e))},c=function(e){return .5*(o(e)-o(-e))},m=function(e){var t=dn/4;if(e<-t||e>t)return s(e)-1;var n=e*e;return n*(-.5+n*(1/24+n*(-1/720+n*(1/40320+n*(-1/3628800+n*(1/4790014600+n*(-1/87178291200+n*(1/20922789888e3))))))))},u=function(e,t){var n=vn(e),i=vn(t);return 3e3>n&&3e3>i?mn(n*n+i*i):(n<i?(n=i,i=e/t):i=t/e,n*mn(1+i*i))},g=function(){throw SyntaxError("Invalid Param")},h=function(e,t){var n=Number.isFinite,a={re:0,im:0};if(e===void 0||null===e)a.re=a.im=0;else if(t!==void 0)a.re=e,a.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)a.re=e.re,a.im=e.im;else if("abs"in e&&"arg"in e){if(!n(e.abs)&&n(e.arg))return i.INFINITY;a.re=e.abs*s(e.arg),a.im=e.abs*r(e.arg)}else if("r"in e&&"phi"in e){if(!n(e.r)&&n(e.phi))return i.INFINITY;a.re=e.r*s(e.phi),a.im=e.r*r(e.phi)}else 2===e.length?(a.re=e[0],a.im=e[1]):g();break;case"string":a.im=a.re=0;var o=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),p=1,l=0;null===o&&g();for(var d=0,m;d<o.length;d++)if(m=o[d]," "===m||"\t"===m||"\n"===m);else"+"===m?p++:"-"===m?l++:"i"===m||"I"===m?(0===p+l&&g()," "===o[d+1]||isNaN(o[d+1])?a.im+=parseFloat((l%2?"-":"")+"1"):(a.im+=parseFloat((l%2?"-":"")+o[d+1]),d++),p=l=0):((0===p+l||isNaN(m))&&g(),"i"===o[d+1]||"I"===o[d+1]?(a.im+=parseFloat((l%2?"-":"")+m),d++):a.re+=parseFloat((l%2?"-":"")+m),p=l=0);0<p+l&&g();break;case"number":a.im=0,a.re=e;break;default:g();}return a};i.prototype={re:0,im:0,sign:function(){var e=this.abs();return new i(this.re/e,this.im/e)},add:function(e,t){var n=new i(e,t);return this.isInfinite()&&n.isInfinite()?i.NAN:this.isInfinite()||n.isInfinite()?i.INFINITY:new i(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new i(e,t);return this.isInfinite()&&n.isInfinite()?i.NAN:this.isInfinite()||n.isInfinite()?i.INFINITY:new i(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new i(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?i.NAN:this.isInfinite()||n.isInfinite()?i.INFINITY:0===n.im&&0===this.im?new i(this.re*n.re,0):new i(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,n){var r=new i(e,n);if(this.isZero()&&r.isZero()||this.isInfinite()&&r.isInfinite())return i.NAN;if(this.isInfinite()||r.isZero())return i.INFINITY;if(this.isZero()||r.isInfinite())return i.ZERO;e=this.re,n=this.im;var o=r.re,s=r.im,p,l;return 0===s?new i(e/o,n/o):vn(o)<vn(s)?(l=o/s,p=o*l+s,new i((e*l+n)/p,(n*l-e)/p)):(l=s/o,p=s*l+o,new i((e+n*l)/p,(n-e*l)/p))},pow:function(e,t){var l=new i(e,t);if(e=this.re,t=this.im,l.isZero())return i.ONE;if(0===l.im){if(0===t&&0<=e)return new i(_n(e,l.re),0);if(0===e)switch((l.re%4+4)%4){case 0:return new i(_n(t,l.re),0);case 1:return new i(0,_n(t,l.re));case 2:return new i(-_n(t,l.re),0);case 3:return new i(0,-_n(t,l.re));}}if(0===e&&0===t&&0<l.re&&0<=l.im)return i.ZERO;var d=p(t,e),c=n(e,t);return e=o(l.re*c-l.im*d),t=l.im*c+l.re*d,new i(e*s(t),e*r(t))},sqrt:function(){var e=this.re,t=this.im,n=this.abs(),a,r;if(0<=e){if(0===t)return new i(mn(e),0);a=.5*mn(2*(n+e))}else a=vn(t)/mn(2*(n-e));return r=0>=e?.5*mn(2*(n-e)):vn(t)/mn(2*(n+e)),new i(a,0>t?-r:r)},exp:function(){var e=o(this.re);if(0===this.im);return new i(e*s(this.im),e*r(this.im))},expm1:function(){var e=Math.expm1,t=this.re,n=this.im;return new i(e(t)*s(n)+m(n),o(t)*r(n))},log:function(){var e=this.re,t=this.im;return new i(n(e,t),p(t,e))},abs:function(){return u(this.re,this.im)},arg:function(){return p(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new i(r(e)*l(t),s(e)*c(t))},cos:function(){var e=this.re,t=this.im;return new i(s(e)*l(t),-r(e)*c(t))},tan:function(){var e=2*this.re,t=2*this.im,n=s(e)+l(t);return new i(r(e)/n,c(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=s(e)-l(t);return new i(-r(e)/n,c(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*l(2*t)+.5*s(2*e);return new i(s(e)*l(t)/n,r(e)*c(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*l(2*t)-.5*s(2*e);return new i(r(e)*l(t)/n,-s(e)*c(t)/n)},asin:function(){var e=this.re,t=this.im,n=new i(t*t-e*e+1,-2*e*t).sqrt(),a=new i(n.re-t,n.im+e).log();return new i(a.im,-a.re)},acos:function(){var e=this.re,t=this.im,n=new i(t*t-e*e+1,-2*e*t).sqrt(),a=new i(n.re-t,n.im+e).log();return new i(dn/2-a.im,a.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new i(0,1/0);if(-1===t)return new i(0,-Infinity)}var n=e*e+(1-t)*(1-t),a=new i((1-t*t-e*e)/n,-2*e/n).log();return new i(-.5*a.im,.5*a.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new i(p(1,e),0);var n=e*e+t*t;return 0==n?new i(0===e?0:e/0,0===t?0:-t/0).atan():new i(e/n,-t/n).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new i(0,1/0);var n=e*e+t*t;return 0==n?new i(0===e?0:e/0,0===t?0:-t/0).acos():new i(e/n,-t/n).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new i(dn/2,1/0);var n=e*e+t*t;return 0==n?new i(0===e?0:e/0,0===t?0:-t/0).asin():new i(e/n,-t/n).asin()},sinh:function(){var e=this.re,t=this.im;return new i(c(e)*s(t),l(e)*r(t))},cosh:function(){var e=this.re,t=this.im;return new i(l(e)*s(t),c(e)*r(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=l(e)+s(t);return new i(c(e)/n,r(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=l(e)-s(t);return new i(c(e)/n,-r(t)/n)},csch:function(){var e=this.re,t=this.im,n=s(2*t)-l(2*e);return new i(-2*c(e)*s(t)/n,2*l(e)*r(t)/n)},sech:function(){var e=this.re,t=this.im,n=s(2*t)+l(2*e);return new i(2*l(e)*s(t)/n,-2*c(e)*r(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(0>=e.im){var t=e.re;e.re=-e.im,e.im=t}else{var t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){var e=this.re,t=this.im,a=1-e,r=1+e,o=a*a+t*t,s=0===o?new i(-1===e?0:e/0,0===t?0:t/0):new i((r*a-t*t)/o,(t*a+r*t)/o),l=s.re;return s.re=n(s.re,s.im)/2,s.im=p(s.im,l)/2,1<e&&0===t&&(s.im=-s.im),s},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new i(0,dn/2);var n=e*e+t*t;return 0==n?new i(0===e?0:e/0,0===t?0:-t/0).atanh():new i(e/n,-t/n).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new i(0===e?1/0:gn(e+mn(e*e+1)),0);var n=e*e+t*t;return 0==n?new i(0===e?0:e/0,0===t?0:-t/0).asinh():new i(e/n,-t/n).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return i.INFINITY;var n=e*e+t*t;return 0==n?new i(0===e?0:e/0,0===t?0:-t/0).acosh():new i(e/n,-t/n).acosh()},inverse:function(){if(this.isZero())return i.INFINITY;if(this.isInfinite())return i.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new i(e/n,-t/n)},conjugate:function(){return new i(this.re,-this.im)},neg:function(){return new i(-this.re,-this.im)},ceil:function(e){return e=_n(10,e||0),new i(hn(this.re*e)/e,hn(this.im*e)/e)},floor:function(e){return e=_n(10,e||0),new i(cn(this.re*e)/e,cn(this.im*e)/e)},round:function(e){return e=_n(10,e||0),new i(bn(this.re*e)/e,bn(this.im*e)/e)},equals:function(e,t){var n=new i(e,t);return vn(n.re-this.re)<=i.EPSILON&&vn(n.im-this.im)<=i.EPSILON},clone:function(){return new i(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==e&&(n+=e),0!==t&&(0===e?0>t&&(n+="-"):n+=0>t?" - ":" + ",t=vn(t),1!==t&&(n+=t),n+="i"),n?n:"0")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return(0===this.re||-0===this.re)&&(0===this.im||-0===this.im)},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},i.ZERO=new i(0,0),i.ONE=new i(1,0),i.I=new i(0,1),i.PI=new i(dn,0),i.E=new i(Math.E,0),i.INFINITY=new i(1/0,1/0),i.NAN=new i(NaN,NaN),i.EPSILON=1e-16,Object.defineProperty(t,"__esModule",{value:!0}),i["default"]=i,i.Complex=i,e.exports=i})()}),ii=te(ni),ai=we("Complex",[],()=>(ii.prototype.type="Complex",ii.prototype.isComplex=!0,ii.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ii.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ii.prototype.format=function(e){var t="",n=this.im,i=this.re,r=ae(this.re,e),o=ae(this.im,e),s=a(e)?e:e?e.precision:null;if(null!==s){var p=_n(10,-s);vn(i/n)<p&&(i=0),vn(n/i)<p&&(n=0)}return t=0===n?r:0===i?1===n?"i":-1===n?"-i":o+"i":0>n?-1===n?r+" - i":r+" - "+o.substring(1)+"i":1===n?r+" + i":r+" + "+o+"i",t},ii.fromPolar=function(){switch(arguments.length){case 1:{var e=arguments[0];if("object"==typeof e)return ii(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(a(t)){if(p(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),a(n))return new ii({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar");}},ii.prototype.valueOf=ii.prototype.toString,ii.fromJSON=function(e){return new ii(e)},ii.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},ii),{isClass:!0}),ri=ne(function(e){(function(){function t(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message}function n(){}return n.prototype=Error.prototype,t.prototype=new n,t}function i(e,t){return isNaN(e=parseInt(e,10))&&a(),e*t}function a(){throw new u}function r(t,n,i){for(var a=1;0<n;t=t*t%i,n>>=1)1&n&&(a=a*t%i);return a}function o(e,n){for(;0==n%2;n/=2);for(;0==n%5;n/=5);if(1===n)return 0;for(var i=10%n,a=1;1!==i;a++)if(i=10*i%n,2000<a)return 0;return a}function s(e,n,i){for(var a=1,o=r(10,i,n),s=0;300>s;s++){if(a===o)return s;a=10*a%n,o=10*o%n}return 0}function p(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function l(e,t){return this instanceof l?void(g(e,t),e=l.REDUCE?p(c.d,c.n):1,this.s=c.s,this.n=c.n/e,this.d=c.d/e):new l(e,t)}var c={s:1,n:0,d:1},m=l.DivisionByZero=t("DivisionByZero"),u=l.InvalidParameter=t("InvalidParameter"),g=function(e,t){var r=0,o=1,p=1,l=0,u=0,g=0,h=1,_=1,f=0,b=1,S=1,E=1,I=1e7,N;if(e===void 0||null===e);else if(t!==void 0)r=e,o=t,p=r*o;else switch(typeof e){case"object":{"d"in e&&"n"in e?(r=e.n,o=e.d,"s"in e&&(r*=e.s)):0 in e?(r=e[0],1 in e&&(o=e[1])):a(),p=r*o;break}case"number":{if(0>e&&(p=e,e=-e),0==e%1)r=e;else if(0<e){for(1<=e&&(_=_n(10,cn(1+gn(e)/un)),e/=_);b<=I&&E<=I;)if(N=(f+S)/(b+E),e===N){b+E<=I?(r=f+S,o=b+E):E>b?(r=S,o=E):(r=f,o=b);break}else e>N?(f+=S,b+=E):(S+=f,E+=b),b>I?(r=S,o=E):(r=f,o=b);r*=_}else(isNaN(e)||isNaN(t))&&(o=r=NaN);break}case"string":if(b=e.match(/\d+|./g),null===b&&a(),"-"===b[f]?(p=-1,f++):"+"===b[f]&&f++,b.length===f+1?u=i(b[f++],p):"."===b[f+1]||"."===b[f]?("."!==b[f]&&(l=i(b[f++],p)),f++,(f+1===b.length||"("===b[f+1]&&")"===b[f+3]||"'"===b[f+1]&&"'"===b[f+3])&&(u=i(b[f],p),h=_n(10,b[f].length),f++),("("===b[f]&&")"===b[f+2]||"'"===b[f]&&"'"===b[f+2])&&(g=i(b[f+1],p),_=_n(10,b[f+1].length)-1,f+=3)):"/"===b[f+1]||":"===b[f+1]?(u=i(b[f],p),h=i(b[f+2],1),f+=3):"/"===b[f+3]&&" "===b[f+1]&&(l=i(b[f],p),u=i(b[f+2],p),h=i(b[f+4],1),f+=5),b.length<=f){o=h*_,p=r=g+o*l+_*u;break}default:a();}if(0===o)throw new m;c.s=0>p?-1:1,c.n=vn(r),c.d=vn(o)};l.REDUCE=1,l.prototype={s:1,n:0,d:1,abs:function(){return new l(this.n,this.d)},neg:function(){return new l(-this.s*this.n,this.d)},add:function(e,t){return g(e,t),new l(this.s*this.n*c.d+c.s*this.d*c.n,this.d*c.d)},sub:function(e,t){return g(e,t),new l(this.s*this.n*c.d-c.s*this.d*c.n,this.d*c.d)},mul:function(e,t){return g(e,t),new l(this.s*c.s*this.n*c.n,this.d*c.d)},div:function(e,t){return g(e,t),new l(this.s*c.s*this.n*c.d,this.d*c.n)},clone:function(){return new l(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new l(NaN):void 0===e?new l(this.s*this.n%this.d,1):(g(e,t),0===c.n&&0===this.d&&l(0,0),new l(this.s*(c.d*this.n)%(c.n*this.d),c.d*this.d))},gcd:function(e,t){return g(e,t),new l(p(c.n,this.n)*p(c.d,this.d),c.d*this.d)},lcm:function(e,t){return g(e,t),0===c.n&&0===this.n?new l:new l(c.n*this.n,p(c.n,this.n)*p(c.d,this.d))},ceil:function(e){return e=_n(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(hn(e*this.s*this.n/this.d),e)},floor:function(e){return e=_n(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(cn(e*this.s*this.n/this.d),e)},round:function(e){return e=_n(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(bn(e*this.s*this.n/this.d),e)},inverse:function(){return new l(this.s*this.d,this.n)},pow:function(e){return 0>e?new l(_n(this.s*this.d,-e),_n(this.n,-e)):new l(_n(this.s*this.n,e),_n(this.d,e))},equals:function(e,t){return g(e,t),this.s*this.n*c.d==c.s*c.n*this.d},compare:function(e,n){g(e,n);var i=this.s*this.n*c.d-c.s*c.n*this.d;return(0<i)-(0>i)},simplify:function(e){function t(e){return 1===e.length?new l(e[0]):t(e.slice(1)).inverse().add(e[0])}if(isNaN(this.n)||isNaN(this.d))return this;var n=this.abs().toContinued();e=e||.001;for(var a=0,r;a<n.length;a++)if(r=t(n.slice(0,a+1)),r.sub(this.abs()).abs().valueOf()<e)return r.mul(this.s);return this},divisible:function(e,t){return g(e,t),c.n*this.d&&!(this.n*c.d%(c.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t="",i=this.n,a=this.d,r;return 0>this.s&&(t+="-"),1===a?t+=i:(e&&0<(r=cn(i/a))&&(t+=r,t+=" ",i%=a),t+=i,t+="/",t+=a),t},toLatex:function(e){var t="",i=this.n,a=this.d,r;return 0>this.s&&(t+="-"),1===a?t+=i:(e&&0<(r=cn(i/a))&&(t+=r,i%=a),t+="\\frac{",t+=i,t+="}{",t+=a,t+="}"),t},toContinued:function(){var e=this.n,n=this.d,i=[],r;if(isNaN(e)||isNaN(n))return i;do i.push(cn(e/n)),r=e%n,e=n,n=r;while(1!==e);return i},toString:function(e){var t=this.n,n=this.d,a;if(isNaN(t)||isNaN(n))return"NaN";l.REDUCE||(a=p(t,n),t/=a,n/=a),e=e||15;var r=o(t,n),d=s(t,n,r),c=-1===this.s?"-":"";if(c+=0|t/n,t%=n,t*=10,t&&(c+="."),r){for(var m=d;m--;)c+=0|t/n,t%=n,t*=10;c+="(";for(var m=r;m--;)c+=0|t/n,t%=n,t*=10;c+=")"}else for(var m=e;t&&m--;)c+=0|t/n,t%=n,t*=10;return c}},Object.defineProperty(l,"__esModule",{value:!0}),l["default"]=l,l.Fraction=l,e.exports=l})()}),oi=te(ri),si=we("Fraction",[],()=>(oi.prototype.type="Fraction",oi.prototype.isFraction=!0,oi.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},oi.fromJSON=function(e){return new oi(e)},oi),{isClass:!0}),pi=we("Matrix",[],()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0}),li=we("DenseMatrix",["Matrix"],e=>{function t(e,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!l(n))throw new Error("Invalid datatype: "+n);if(u(e))"DenseMatrix"===e.type?(this._data=W(e._data),this._size=W(e._size),this._datatype=n||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=n||e._datatype);else if(e&&En(e.data)&&En(e.size))this._data=e.data,this._size=e.size,ze(this._data,this._size),this._datatype=n||e.datatype;else if(En(e))this._data=m(e),this._size=Se(this._data),ze(this._data,this._size),this._datatype=n;else if(e)throw new TypeError("Unsupported type of data ("+Y(e)+")");else this._data=[],this._size=[0],this._datatype=n}function n(e,n){if(!f(n))throw new TypeError("Invalid index");var a=n.isScalar();if(a)return e.get(n.min());var r=n.size();if(r.length!==e._size.length)throw new be(r.length,e._size.length);for(var s=n.min(),p=n.max(),l=0,d=e._size.length;l<d;l++)Ee(s[l],e._size[l]),Ee(p[l],e._size[l]);return new t(o(e._data,n,r.length,0),e._datatype)}function o(e,t,n,a){var r=t.dimension(a);return a===n-1?r.map(function(t){return Ee(t,e.length),e[t]}).valueOf():r.map(function(r){Ee(r,e.length);var i=e[r];return o(i,t,n,a+1)}).valueOf()}function s(e,t,n,a){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var r=t.size(),o=t.isScalar(),s;if(u(n)?(s=n.size(),n=n.valueOf()):s=Se(n),o){if(0!==s.length)throw new TypeError("Scalar expected");e.set(t.min(),n,a)}else{if(r.length<e._size.length)throw new be(r.length,e._size.length,"<");if(s.length<r.length){for(var l=0,d=0;1===r[l]&&1===s[l];)l++;for(;1===r[l];)d++,l++;n=De(n,r.length,d,s)}if(!G(r,s))throw new be(r,s,">");var m=t.max().map(function(e){return e+1});c(e,m,a);var g=r.length;p(e._data,t,n,g,0)}return e}function p(e,t,n,i,a){var r=t.dimension(a);a===i-1?r.forEach(function(t,i){Ee(t),e[t]=n[i[0]]}):r.forEach(function(r,o){Ee(r),p(e[r],t,n[o[0]],i,a+1)})}function d(e,t,n){if(0===t.length){for(var i=e._data;En(i);)i=i[0];return i}return e._size=t.slice(0),e._data=Ce(e._data,e._size,n),e}function c(e,t,n){for(var a=e._size.slice(0),r=!1;a.length<t.length;)a.push(0),r=!0;for(var o=0,s=t.length;o<s;o++)t[o]>a[o]&&(a[o]=t[o],r=!0);r&&d(e,a,n)}function m(e){for(var t=0,n=e.length,a;t<n;t++)a=e[t],En(a)?e[t]=m(a):a&&!0===a.isMatrix&&(e[t]=m(a.valueOf()));return e}var{Matrix:h}=e;return t.prototype=new h,t.prototype.createDenseMatrix=function(e,n){return new t(e,n)},t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return Oe(this._data,Y)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(e,n){return new t(e,n)},t.prototype.subset=function(e,t,i){switch(arguments.length){case 1:return n(this,e);case 2:case 3:return s(this,e,t,i);default:throw new SyntaxError("Wrong number of arguments");}},t.prototype.get=function(e){if(!En(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new be(e.length,this._size.length);for(var t=0;t<e.length;t++)Ee(e[t],this._size[t]);for(var n=this._data,a=0,r=e.length,o;a<r;a++)o=e[a],Ee(o,n.length),n=n[o];return n},t.prototype.set=function(e,t,n){if(!En(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new be(e.length,this._size.length,"<");var a=e.map(function(e){return e+1}),r,o,s;c(this,a,n);var p=this._data;for(r=0,o=e.length-1;r<o;r++)s=e[r],Ee(s,p.length),p=p[s];return s=e[e.length-1],Ee(s,p.length),p[s]=t,this},t.prototype.resize=function(e,t,n){if(!g(e))throw new TypeError("Array or Matrix expected");var i=e.valueOf().map(e=>Array.isArray(e)&&1===e.length?e[0]:e),a=n?this.clone():this;return d(a,i,t)},t.prototype.reshape=function(e,t){var n=t?this.clone():this;return n._data=Ae(n._data,e),n._size=e.slice(0),n},t.prototype.clone=function(){var e=new t({data:W(this._data),size:W(this._size),datatype:this._datatype});return e},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(e){var n=this,i=function t(i,a){return En(i)?i.map(function(e,n){return t(e,a.concat(n))}):e(i,a,n)}(this._data,[]),a=void 0===this._datatype?void 0:Oe(i,Y);return new t(i,a)},t.prototype.forEach=function(e){var t=this;(function n(i,a){En(i)?i.forEach(function(e,t){n(e,a.concat(t))}):e(i,a,t)})(this._data,[])},t.prototype.toArray=function(){return W(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(e){return _e(this._data,e)},t.prototype.toString=function(){return _e(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(e){if(!e)e=0;else if(r(e)&&(e=e.toNumber()),!a(e)||!ie(e))throw new TypeError("The parameter k must be an integer number");for(var o=0<e?e:0,s=0>e?-e:0,p=this._size[0],l=this._size[1],d=xn(p-s,l-o),n=[],c=0;c<d;c++)n[c]=this._data[c+s][c+o];return new t({data:n,size:[d],datatype:this._datatype})},t.diagonal=function(e,o,s,i){if(!En(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(r(e)&&(e=e.toNumber()),!a(e)||!ie(e)||1>e)throw new Error("Size values must be positive integers");return e}),!s)s=0;else if(r(s)&&(s=s.toNumber()),!a(s)||!ie(s))throw new TypeError("The parameter k must be an integer number");var p=0<s?s:0,l=0>s?-s:0,c=e[0],m=e[1],g=xn(c-l,m-p),n;if(En(o)){if(o.length!==g)throw new Error("Invalid value array length");n=function(e){return o[e]}}else if(u(o)){var h=o.size();if(1!==h.length||h[0]!==g)throw new Error("Invalid matrix length");n=function(e){return o.get([e])}}else n=function(){return o};i||(i=r(n(0))?n(0).mul(0):0);var y=[];if(0<e.length){y=Ce(y,e,i);for(var x=0;x<g;x++)y[x+l][x+p]=n(x)}return new t({data:y,size:[c,m]})},t.fromJSON=function(e){return new t(e)},t.prototype.swapRows=function(e,n){if(!a(e)||!ie(e)||!a(n)||!ie(n))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Ee(e,this._size[0]),Ee(n,this._size[0]),t._swapRows(e,n,this._data),this},t._swapRows=function(e,t,n){var i=n[e];n[e]=n[t],n[t]=i},t},{isClass:!0}),di="number",ci="number, number";Kt.signature=di,Qt.signature=ci,$t.signature=ci,en.signature=di;var mi=we("equalScalar",["typed","config"],e=>{var{typed:t,config:n}=e;return t("equalScalar",{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return ue(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||tn(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return nn(e,t,n.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)}})}),ui=we("equalScalar",["typed","config"],e=>{var{typed:t,config:n}=e;return t("equalScalar",{"number, number":function(e,t){return ue(e,t,n.epsilon)}})}),gi=we("SparseMatrix",["typed","equalScalar","Matrix"],e=>{function t(e,a){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!l(a))throw new Error("Invalid datatype: "+a);if(u(e))n(this,e,a);else if(e&&En(e.index)&&En(e.ptr)&&En(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=a||e.datatype;else if(En(e))i(this,e,a);else if(e)throw new TypeError("Unsupported type of data ("+Y(e)+")");else this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=a}function n(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?W(t._values):void 0,e._index=W(t._index),e._ptr=W(t._ptr),e._size=W(t._size),e._datatype=n||t._datatype):i(e,t.valueOf(),n||t._datatype)}function i(e,t,n){e._values=[],e._index=[],e._ptr=[],e._datatype=n;var a=t.length,r=0,o=b,s=0;if(l(n)&&(o=_.find(b,[n,n])||b,s=_.convert(0,n)),0<a){var p=0;do{e._ptr.push(e._index.length);for(var d=0,c;d<a;d++)if(c=t[d],!En(c))0==p&&1>r&&(r=1),o(c,s)||(e._values.push(c),e._index.push(d));else if(0==p&&r<c.length&&(r=c.length),p<c.length){var m=c[p];o(m,s)||(e._values.push(m),e._index.push(d))}p++}while(p<r)}e._ptr.push(e._index.length),e._size=[a,r]}function o(e,n){if(!f(n))throw new TypeError("Invalid index");var a=n.isScalar();if(a)return e.get(n.min());var r=n.size();if(r.length!==e._size.length)throw new be(r.length,e._size.length);var o=n.min(),s=n.max(),p,l,d,c;for(p=0,l=e._size.length;p<l;p++)Ee(o[p],e._size[p]),Ee(s[p],e._size[p]);var m=e._values,u=e._index,g=e._ptr,h=n.dimension(0),y=n.dimension(1),x=[],_=[];h.forEach(function(e,t){_[e]=t[0],x[e]=!0});var v=m?[]:void 0,b=[],M=[];return y.forEach(function(e){for(M.push(b.length),d=g[e],c=g[e+1];d<c;d++)p=u[d],!0===x[p]&&(b.push(_[p]),v&&v.push(m[d]))}),M.push(b.length),new t({values:v,index:b,ptr:M,size:r,datatype:e._datatype})}function s(e,t,a,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var o=t.size(),s=t.isScalar(),p;if(u(a)?(p=a.size(),a=a.toArray()):p=Se(a),s){if(0!==p.length)throw new TypeError("Scalar expected");e.set(t.min(),a,r)}else{if(1!==o.length&&2!==o.length)throw new be(o.length,e._size.length,"<");if(p.length<o.length){for(var l=0,d=0;1===o[l]&&1===p[l];)l++;for(;1===o[l];)d++,l++;a=De(a,o.length,d,p)}if(!G(o,p))throw new be(o,p,">");for(var c=t.min()[0],g=t.min()[1],h=p[0],m=p[1],n=0;n<h;n++)for(var _=0,f;_<m;_++)f=a[n][_],e.set([n+c,_+g],f,r)}return e}function p(e,t,n,i){if(0==n-t)return n;for(var a=t;a<n;a++)if(i[a]===e)return a;return t}function d(e,t,n,i,a){n.splice(e,1),i.splice(e,1);for(var r=t+1;r<a.length;r++)a[r]--}function c(e,t,n,i,a,r,o){a.splice(e,0,i),r.splice(e,0,t);for(var s=n+1;s<o.length;s++)o[s]++}function h(e,t,a,o){var s=o||0,m=b,u=0;l(e._datatype)&&(m=_.find(b,[e._datatype,e._datatype])||b,u=_.convert(0,e._datatype),s=_.convert(s,e._datatype));var g=!m(s,u),h=e._size[0],r=e._size[1],y,x,f;if(a>r){for(x=r;x<a;x++)if(e._ptr[x]=e._values.length,g)for(y=0;y<h;y++)e._values.push(s),e._index.push(y);e._ptr[a]=e._values.length}else a<r&&(e._ptr.splice(a+1,r-a),e._values.splice(e._ptr[a],e._values.length),e._index.splice(e._ptr[a],e._index.length));if(r=a,t>h){if(g){var v=0;for(x=0;x<r;x++){e._ptr[x]+=v,f=e._ptr[x+1]+v;var M=0;for(y=h;y<t;y++,M++)e._values.splice(f+M,0,s),e._index.splice(f+M,0,y),v++}e._ptr[r]=e._values.length}}else if(t<h){var S=0;for(x=0;x<r;x++){e._ptr[x]-=S;var N=e._ptr[x],z=e._ptr[x+1]-S;for(f=N;f<z;f++)y=e._index[f],y>t-1&&(e._values.splice(f,1),e._index.splice(f,1),S++)}e._ptr[x]=e._values.length}return e._size[0]=t,e._size[1]=a,e}function y(e,n,a,r,o,s,p){var d=[],c=[],m=[],u=b,g=0;l(e._datatype)&&(u=_.find(b,[e._datatype,e._datatype])||b,g=_.convert(0,e._datatype));for(var h=function(e,t,n){e=s(e,t,n),u(e,g)||(d.push(e),c.push(t))},y=r;y<=o;y++){m.push(d.length);var x=e._ptr[y],f=e._ptr[y+1];if(p)for(var v=x,M;v<f;v++)M=e._index[v],M>=n&&M<=a&&h(e._values[v],M-n,y-r);else{for(var S={},N=x,z;N<f;N++)z=e._index[N],S[z]=e._values[N];for(var E=n,C;E<=a;E++)C=E in S?S[E]:0,h(C,E-n,y-r)}}return m.push(d.length),new t({values:d,index:c,ptr:m,size:[a-n+1,o-r+1]})}function x(e,t,n,r,o){var s=r[0],p=r[1],l=[],a,d;for(a=0;a<s;a++)for(l[a]=[],d=0;d<p;d++)l[a][d]=0;for(d=0;d<p;d++)for(var c=n[d],m=n[d+1],u=c;u<m;u++)a=t[u],l[a][d]=e?o?W(e[u]):e[u]:1;return l}var{typed:_,equalScalar:b,Matrix:M}=e;return t.prototype=new M,t.prototype.createSparseMatrix=function(e,n){return new t(e,n)},t.prototype.type="SparseMatrix",t.prototype.isSparseMatrix=!0,t.prototype.getDataType=function(){return Oe(this._values,Y)},t.prototype.storage=function(){return"sparse"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(e,n){return new t(e,n)},t.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},t.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,e);case 2:case 3:return s(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments");}},t.prototype.get=function(e){if(!En(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new be(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];Ee(t,this._size[0]),Ee(n,this._size[1]);var i=p(t,this._ptr[n],this._ptr[n+1],this._index);return i<this._ptr[n+1]&&this._index[i]===t?this._values[i]:0},t.prototype.set=function(e,t,n){if(!En(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new be(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var a=e[0],i=e[1],r=this._size[0],o=this._size[1],s=b,m=0;l(this._datatype)&&(s=_.find(b,[this._datatype,this._datatype])||b,m=_.convert(0,this._datatype)),(a>r-1||i>o-1)&&(h(this,fn(a+1,r),fn(i+1,o),n),r=this._size[0],o=this._size[1]),Ee(a,r),Ee(i,o);var u=p(a,this._ptr[i],this._ptr[i+1],this._index);return u<this._ptr[i+1]&&this._index[u]===a?s(t,m)?d(u,i,this._values,this._index,this._ptr):this._values[u]=t:c(u,a,i,t,this._values,this._index,this._ptr),this},t.prototype.resize=function(e,t,n){if(!g(e))throw new TypeError("Array or Matrix expected");var i=e.valueOf().map(e=>Array.isArray(e)&&1===e.length?e[0]:e);if(2!==i.length)throw new Error("Only two dimensions matrix are supported");i.forEach(function(e){if(!a(e)||!ie(e)||0>e)throw new TypeError("Invalid size, must contain positive integers (size: "+_e(i)+")")});var r=n?this.clone():this;return h(r,i[0],i[1],t)},t.prototype.reshape=function(e,t){if(!En(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(e.forEach(function(t){if(!a(t)||!ie(t)||0>t)throw new TypeError("Invalid size, must contain positive integers (size: "+_e(e)+")")}),this._size[0]*this._size[1]!=e[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return n;for(var r=[],o=0;o<n._ptr.length;o++)for(var s=0;s<n._ptr[o+1]-n._ptr[o];s++)r.push(o);for(var l=n._values.slice(),d=n._index.slice(),m=0;m<n._index.length;m++){var u=d[m],g=r[m],y=u*n._size[1]+g;r[m]=y%e[1],d[m]=cn(y/e[1])}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(var x=0;x<n._ptr.length;x++)n._ptr[x]=0;for(var _=0;_<l.length;_++){var f=d[_],b=r[_],M=l[_],v=p(f,n._ptr[b],n._ptr[b+1],n._index);c(v,f,b,M,n._values,n._index,n._ptr)}return n},t.prototype.clone=function(){var e=new t({values:this._values?W(this._values):void 0,index:W(this._index),ptr:W(this._ptr),size:W(this._size),datatype:this._datatype});return e},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(e,t){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var n=this,i=this._size[0],a=this._size[1];return y(this,0,i-1,0,a-1,function(t,a,i){return e(t,[a,i],n)},t)},t.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this,a=this._size[0],r=this._size[1],o=0;o<r;o++){var s=this._ptr[o],p=this._ptr[o+1];if(t)for(var l=s,d;l<p;l++)d=this._index[l],e(this._values[l],[d,o],n);else{for(var c={},m=s,u;m<p;m++)u=this._index[m],c[u]=this._values[m];for(var g=0,h;g<a;g++)h=g in c?c[g]:0,e(h,[g,o],n)}}},t.prototype.toArray=function(){return x(this._values,this._index,this._ptr,this._size,!0)},t.prototype.valueOf=function(){return x(this._values,this._index,this._ptr,this._size,!1)},t.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],a=this.density(),r="Sparse Matrix ["+_e(t,e)+" x "+_e(n,e)+"] density: "+_e(a,e)+"\n",o=0;o<n;o++)for(var s=this._ptr[o],p=this._ptr[o+1],l=s,d;l<p;l++)d=this._index[l],r+="\n    ("+_e(d,e)+", "+_e(o,e)+") ==> "+(this._values?_e(this._values[l],e):"X");return r},t.prototype.toString=function(){return _e(this.toArray())},t.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(e){if(!e)e=0;else if(r(e)&&(e=e.toNumber()),!a(e)||!ie(e))throw new TypeError("The parameter k must be an integer number");var o=0<e?e:0,s=0>e?-e:0,p=this._size[0],l=this._size[1],d=xn(p-s,l-o),n=[],c=[],m=[];m[0]=0;for(var u=o;u<l&&n.length<d;u++)for(var g=this._ptr[u],h=this._ptr[u+1],y=g,_;y<h;y++)if(_=this._index[y],_===u-o+s){n.push(this._values[y]),c[n.length-1]=_-s;break}return m.push(n.length),new t({values:n,index:c,ptr:m,size:[d,1]})},t.fromJSON=function(e){return new t(e)},t.diagonal=function(e,o,s,p,d){if(!En(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(r(e)&&(e=e.toNumber()),!a(e)||!ie(e)||1>e)throw new Error("Size values must be positive integers");return e}),!s)s=0;else if(r(s)&&(s=s.toNumber()),!a(s)||!ie(s))throw new TypeError("The parameter k must be an integer number");var c=b,m=0;l(d)&&(c=_.find(b,[d,d])||b,m=_.convert(0,d));var g=0<s?s:0,h=0>s?-s:0,y=e[0],x=e[1],f=xn(y-h,x-g),n;if(En(o)){if(o.length!==f)throw new Error("Invalid value array length");n=function(e){return o[e]}}else if(u(o)){var M=o.size();if(1!==M.length||M[0]!==f)throw new Error("Invalid matrix length");n=function(e){return o.get([e])}}else n=function(){return o};for(var S=[],N=[],z=[],E=0;E<x;E++){z.push(S.length);var C=E-g;if(0<=C&&C<f){var i=n(C);c(i,m)||(N.push(C+h),S.push(i))}}return z.push(S.length),new t({values:S,index:N,ptr:z,size:[y,x]})},t.prototype.swapRows=function(e,n){if(!a(e)||!ie(e)||!a(n)||!ie(n))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Ee(e,this._size[0]),Ee(n,this._size[0]),t._swapRows(e,n,this._size[1],this._values,this._index,this._ptr),this},t._forEachRow=function(e,t,n,i,a){for(var r=i[e],o=i[e+1],s=r;s<o;s++)a(n[s],t[s])},t._swapRows=function(e,t,n,i,a,r){for(var o=0;o<n;o++){var s=r[o],l=r[o+1],d=p(e,s,l,a),c=p(t,s,l,a);if(d<l&&c<l&&a[d]===e&&a[c]===t){if(i){var m=i[d];i[d]=i[c],i[c]=m}continue}if(d<l&&a[d]===e&&(c>=l||a[c]!==t)){var u=i?i[d]:void 0;a.splice(c,0,t),i&&i.splice(c,0,u),a.splice(c<=d?d+1:d,1),i&&i.splice(c<=d?d+1:d,1);continue}if(c<l&&a[c]===t&&(d>=l||a[d]!==e)){var g=i?i[c]:void 0;a.splice(d,0,e),i&&i.splice(d,0,g),a.splice(d<=c?c+1:c,1),i&&i.splice(d<=c?c+1:c,1)}}},t},{isClass:!0}),hi=we("number",["typed"],e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=+e;if(isNaN(t))throw new SyntaxError("String \""+e+"\" is no valid number");if(["0b","0o","0x"].includes(e.substring(0,2))){if(4294967295<t)throw new SyntaxError("String \"".concat(e,"\" is out of range"));2147483648&t&&(t=-1*~(t-1))}return t},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(){throw new Error("Second argument with valueless unit expected")},null:function(){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return Gt(e,this)}});return n.fromJSON=function(e){return parseFloat(e.value)},n}),yi=we("bignumber",["typed","BigNumber"],e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){return new n(e)},BigNumber:function(e){return e},Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(){return new n(0)},"Array | Matrix":function(e){return Gt(e,this)}})}),xi=we("fraction",["typed","Fraction"],e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(){return new n(0)},BigNumber:function(e){return new n(e.toString())},Fraction:function(e){return e},Object:function(e){return new n(e)},"Array | Matrix":function(e){return Gt(e,this)}})}),_i="matrix",fi=we(_i,["typed","Matrix","DenseMatrix","SparseMatrix"],e=>{function t(e,t,n){if("dense"===t||"default"===t||t===void 0)return new a(e,n);if("sparse"===t)return new r(e,n);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}var{typed:n,Matrix:i,DenseMatrix:a,SparseMatrix:r}=e;return n(_i,{"":function(){return t([])},string:function(e){return t([],e)},"string, string":function(e,n){return t([],e,n)},Array:function(e){return t(e)},Matrix:function(e){return t(e,e.storage())},"Array | Matrix, string":t,"Array | Matrix, string, string":t})}),vi="unaryMinus",bi=we(vi,["typed"],e=>{var{typed:t}=e;return t(vi,{number:en,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=this(e.value),t},"Array | Matrix":function(e){return Gt(e,this)}})}),Mi="abs",Si=we(Mi,["typed"],e=>{var{typed:t}=e;return t(Mi,{number:Kt,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return Gt(e,this)},Unit:function(e){return e.abs()}})}),Ni="addScalar",zi=we(Ni,["typed"],e=>{var{typed:t}=e;return t(Ni,{"number, number":Qt,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null===e.value||void 0===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value||void 0===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n}})}),Ei=we("algorithm11",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return function(e,a,r,o){var s=e._values,p=e._index,l=e._ptr,d=e._size,c=e._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=d[0],u=d[1],g=n,h=0,y=r,x;"string"==typeof c&&(x=c,g=t.find(n,[x,x]),h=t.convert(0,x),a=t.convert(a,x),y=t.find(r,[x,x]));for(var _=[],f=[],M=[],S=0;S<u;S++){M[S]=f.length;for(var N=l[S],z=l[S+1],E=N;E<z;E++){var C=p[E],i=o?y(a,s[E]):y(s[E],a);g(i,h)||(f.push(C),_.push(i))}}return M[u]=f.length,e.createSparseMatrix({values:_,index:f,ptr:M,size:[m,u],datatype:x})}}),Ci=we("algorithm14",["typed"],e=>{function t(e,a,r,o,n,s,p){var l=[];if(a===r.length-1)for(var d=0;d<o;d++)l[d]=p?e(s,n[d]):e(n[d],s);else for(var c=0;c<o;c++)l[c]=t(e,a+1,r,r[a+1],n[c],s,p);return l}var{typed:n}=e;return function(e,i,a,r){var o=e._data,s=e._size,p=e._datatype,l=a,d;"string"==typeof p&&(d=p,i=n.convert(i,d),l=n.find(a,[d,d]));var c=0<s.length?t(l,0,s,s[0],o,i,r):[];return e.createDenseMatrix({data:c,size:W(s),datatype:d})}}),Ii=we("algorithm01",["typed"],e=>{var{typed:t}=e;return function(e,n,a,r){var o=e._data,s=e._size,p=e._datatype,l=n._values,d=n._index,c=n._ptr,m=n._size,u=n._datatype;if(s.length!==m.length)throw new be(s.length,m.length);if(s[0]!==m[0]||s[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+m+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=s[0],h=s[1],y="string"==typeof p&&p===u?p:void 0,_=y?t.find(a,[y,y]):a,f=[],v,b;for(v=0;v<g;v++)f[v]=[];var M=[],x=[];for(b=0;b<h;b++){for(var S=b+1,N=c[b],z=c[b+1],E=N;E<z;E++)v=d[E],M[v]=r?_(l[E],o[v][b]):_(o[v][b],l[E]),x[v]=S;for(v=0;v<g;v++)f[v][b]=x[v]===S?M[v]:o[v][b]}return e.createDenseMatrix({data:f,size:[g,h],datatype:y})}}),Ai=we("algorithm10",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:n}=e;return function(e,a,o,s){var p=e._values,l=e._index,d=e._ptr,c=e._size,m=e._datatype;if(!p)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u=c[0],g=c[1],h=o,y;"string"==typeof m&&(y=m,a=t.convert(a,y),h=t.find(o,[y,y]));for(var _=[],f=[],x=[],v=0,M;v<g;v++){M=v+1;for(var S=d[v],N=d[v+1],z=S,E;z<N;z++)E=l[z],f[E]=p[z],x[E]=M;for(var C=0;C<u;C++)0==v&&(_[C]=[]),_[C][v]=x[C]===M?s?h(a,f[C]):h(f[C],a):a}return new n({data:_,size:[u,g],datatype:y})}}),ki=we("algorithm13",["typed"],e=>{function t(e,a,r,o,n,s){var p=[];if(a===r.length-1)for(var l=0;l<o;l++)p[l]=e(n[l],s[l]);else for(var d=0;d<o;d++)p[d]=t(e,a+1,r,r[a+1],n[d],s[d]);return p}var{typed:n}=e;return function(e,i,a){var r=e._data,o=e._size,p=e._datatype,l=i._data,d=i._size,c=i._datatype,m=[];if(o.length!==d.length)throw new be(o.length,d.length);for(var u=0;u<o.length;u++){if(o[u]!==d[u])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+d+")");m[u]=o[u]}var g=a,h;"string"==typeof p&&p===c&&(h=p,g=n.find(a,[h,h]));var y=0<m.length?t(g,0,m,m[0],r,l):[];return e.createDenseMatrix({data:y,size:m,datatype:h})}}),Di=we("algorithm03",["typed"],e=>{var{typed:t}=e;return function(e,n,a,r){var o=e._data,s=e._size,p=e._datatype,l=n._values,d=n._index,c=n._ptr,m=n._size,u=n._datatype;if(s.length!==m.length)throw new be(s.length,m.length);if(s[0]!==m[0]||s[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+m+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=s[0],h=s[1],_=0,f=a,v;"string"==typeof p&&p===u&&(v=p,_=t.convert(0,v),f=t.find(a,[v,v]));for(var b=[],M=0;M<g;M++)b[M]=[];for(var S=[],x=[],N=0,E;N<h;N++){E=N+1;for(var C=c[N],I=c[N+1],A=C,D;A<I;A++)D=d[A],S[D]=r?f(l[A],o[D][N]):f(o[D][N],l[A]),x[D]=E;for(var P=0;P<g;P++)b[P][N]=x[P]===E?S[P]:r?f(_,o[P][N]):f(o[P][N],_)}return e.createDenseMatrix({data:b,size:[g,h],datatype:v})}}),ji=we("algorithm05",["typed","equalScalar"],e=>{var{typed:t,equalScalar:n}=e;return function(e,a,r){var o=e._values,s=e._index,p=e._ptr,l=e._size,d=e._datatype,c=a._values,m=a._index,u=a._ptr,g=a._size,h=a._datatype;if(l.length!==g.length)throw new be(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");var y=l[0],x=l[1],_=n,f=0,v=r,b;"string"==typeof d&&d===h&&(b=d,_=t.find(n,[b,b]),f=t.convert(0,b),v=t.find(r,[b,b]));var M=o&&c?[]:void 0,S=[],N=[],z=M?[]:void 0,E=M?[]:void 0,C=[],I=[],A,D,P,O;for(D=0;D<x;D++){N[D]=S.length;var w=D+1;for(P=p[D],O=p[D+1];P<O;P++)A=s[P],S.push(A),C[A]=w,z&&(z[A]=o[P]);for(P=u[D],O=u[D+1];P<O;P++)A=m[P],C[A]!==w&&S.push(A),I[A]=w,E&&(E[A]=c[P]);if(M)for(P=N[D];P<S.length;){A=S[P];var T=C[A],F=I[A];if(T===w||F===w){var B=T===w?z[A]:f,L=F===w?E[A]:f,R=v(B,L);_(R,f)?S.splice(P,1):(M.push(R),P++)}}}return N[x]=S.length,e.createSparseMatrix({values:M,index:S,ptr:N,size:[y,x],datatype:b})}}),Pi=we("algorithm12",["typed","DenseMatrix"],e=>{var{typed:t,DenseMatrix:n}=e;return function(e,a,o,s){var p=e._values,l=e._index,d=e._ptr,c=e._size,m=e._datatype;if(!p)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u=c[0],g=c[1],h=o,y;"string"==typeof m&&(y=m,a=t.convert(a,y),h=t.find(o,[y,y]));for(var _=[],f=[],x=[],v=0,M;v<g;v++){M=v+1;for(var S=d[v],N=d[v+1],z=S,E;z<N;z++)E=l[z],f[E]=p[z],x[E]=M;for(var C=0;C<u;C++)0==v&&(_[C]=[]),_[C][v]=x[C]===M?s?h(a,f[C]):h(f[C],a):s?h(a,0):h(0,a)}return new n({data:_,size:[u,g],datatype:y})}}),Oi=we("multiplyScalar",["typed"],e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":$t,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var n=t.clone();return n.value=null===n.value?n._normalize(e):this(n.value,e),n},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var n=e.clone();return n.value=null===n.value?n._normalize(t):this(n.value,t),n},"Unit, Unit":function(e,t){return e.multiply(t)}})}),wi="multiply",Ti=we(wi,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],e=>{function t(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)");}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)");}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)");}}function n(e,t,i){if(0===i)throw new Error("Cannot multiply two empty vectors");return g(e,t)}function i(e,t){if("dense"!==t.storage())throw new Error("Support for SparseMatrix not implemented");return r(e,t)}function r(e,t){var n=e._data,a=e._size,r=e._datatype,s=t._data,p=t._size,m=t._datatype,u=a[0],g=p[1],h=l,y=d,x;r&&m&&r===m&&"string"==typeof r&&(x=r,h=o.find(l,[x,x]),y=o.find(d,[x,x]));for(var _=[],c=0,f;c<g;c++){f=y(n[0],s[0][c]);for(var v=1;v<u;v++)f=h(f,y(n[v],s[v][c]));_[c]=f}return e.createDenseMatrix({data:_,size:[g],datatype:x})}var{typed:o,matrix:s,addScalar:l,multiplyScalar:d,equalScalar:m,dot:g}=e,h=Ei({typed:o,equalScalar:m}),_=Ci({typed:o}),f=o("_multiplyMatrixVector",{"DenseMatrix, any":function(e,t){var n=e._data,a=e._size,r=e._datatype,s=t._data,p=t._datatype,m=a[0],u=a[1],g=l,h=d,y;r&&p&&r===p&&"string"==typeof r&&(y=r,g=o.find(l,[y,y]),h=o.find(d,[y,y]));for(var x=[],c=0;c<m;c++){for(var _=n[c],f=h(_[0],s[0]),v=1;v<u;v++)f=g(f,h(_[v],s[v]));x[c]=f}return e.createDenseMatrix({data:x,size:[m],datatype:y})},"SparseMatrix, any":function(e,t){var n=e._values,i=e._index,a=e._ptr,r=e._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s=t._data,c=t._datatype,u=e._size[0],g=t._size[0],h=[],y=[],_=[],f=l,v=d,b=m,M=0,S;r&&c&&r===c&&"string"==typeof r&&(S=r,f=o.find(l,[S,S]),v=o.find(d,[S,S]),b=o.find(m,[S,S]),M=o.convert(0,S));var N=[],x=[];_[0]=0;for(var z=0,E;z<g;z++)if(E=s[z],!b(E,M))for(var C=a[z],I=a[z+1],A=C,k;A<I;A++)k=i[A],x[k]?N[k]=f(N[k],v(E,n[A])):(x[k]=!0,y.push(k),N[k]=v(E,n[A]));for(var D=y.length,j=0,P;j<D;j++)P=y[j],h[j]=N[P];return _[1]=y.length,e.createSparseMatrix({values:h,index:y,ptr:_,size:[u,1],datatype:S})}}),v=o("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,t){var n=e._data,a=e._size,r=e._datatype,s=t._data,p=t._size,m=t._datatype,u=a[0],g=a[1],h=p[1],y=l,_=d,f;r&&m&&r===m&&"string"==typeof r&&(f=r,y=o.find(l,[f,f]),_=o.find(d,[f,f]));for(var v=[],c=0,b;c<u;c++){b=n[c],v[c]=[];for(var M=0,S;M<h;M++){S=_(b[0],s[0][M]);for(var N=1;N<g;N++)S=y(S,_(b[N],s[N][M]));v[c][M]=S}}return e.createDenseMatrix({data:v,size:[u,h],datatype:f})},"DenseMatrix, SparseMatrix":function(e,t){var n=e._data,a=e._size,r=e._datatype,s=t._values,p=t._index,u=t._ptr,g=t._size,h=t._datatype;if(!s)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var y=a[0],x=g[1],_=l,f=d,v=m,b=0,M;r&&h&&r===h&&"string"==typeof r&&(M=r,_=o.find(l,[M,M]),f=o.find(d,[M,M]),v=o.find(m,[M,M]),b=o.convert(0,M));for(var S=[],N=[],z=[],E=t.createSparseMatrix({values:S,index:N,ptr:z,size:[y,x],datatype:M}),c=0;c<x;c++){z[c]=N.length;var C=u[c],I=u[c+1];if(I>C)for(var A=0,k=0;k<y;k++){for(var D=k+1,j=void 0,P=C,O;P<I;P++)O=p[P],A===D?j=_(j,f(n[k][O],s[P])):(j=f(n[k][O],s[P]),A=D);A!==D||v(j,b)||(N.push(k),S.push(j))}}return z[x]=N.length,E},"SparseMatrix, DenseMatrix":function(e,t){var n=e._values,i=e._index,a=e._ptr,r=e._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s=t._data,u=t._datatype,g=e._size[0],h=t._size[0],y=t._size[1],_=l,f=d,v=m,b=0,M;r&&u&&r===u&&"string"==typeof r&&(M=r,_=o.find(l,[M,M]),f=o.find(d,[M,M]),v=o.find(m,[M,M]),b=o.convert(0,M));for(var S=[],N=[],z=[],E=e.createSparseMatrix({values:S,index:N,ptr:z,size:[g,y],datatype:M}),c=[],x=[],C=0;C<y;C++){z[C]=N.length;for(var I=C+1,A=0,k;A<h;A++)if(k=s[A][C],!v(k,b))for(var D=a[A],j=a[A+1],P=D,O;P<j;P++)O=i[P],x[O]===I?c[O]=_(c[O],f(k,n[P])):(x[O]=I,N.push(O),c[O]=f(k,n[P]));for(var w=z[C],T=N.length,F=w,B;F<T;F++)B=N[F],S[F]=c[B]}return z[y]=N.length,E},"SparseMatrix, SparseMatrix":function(e,t){var n=e._values,i=e._index,a=e._ptr,r=e._datatype,s=t._values,m=t._index,u=t._ptr,g=t._datatype,h=e._size[0],y=t._size[1],_=n&&s,f=l,v=d,b;r&&g&&r===g&&"string"==typeof r&&(b=r,f=o.find(l,[b,b]),v=o.find(d,[b,b]));for(var M=_?[]:void 0,S=[],N=[],z=e.createSparseMatrix({values:M,index:S,ptr:N,size:[h,y],datatype:b}),c=_?[]:void 0,x=[],E=0,C,I,A,k,D,j,P,O;E<y;E++){N[E]=S.length;var w=E+1;for(D=u[E],j=u[E+1],k=D;k<j;k++)if(O=m[k],_)for(I=a[O],A=a[O+1],C=I;C<A;C++)P=i[C],x[P]===w?c[P]=f(c[P],v(s[k],n[C])):(x[P]=w,S.push(P),c[P]=v(s[k],n[C]));else for(I=a[O],A=a[O+1],C=I;C<A;C++)P=i[C],x[P]!==w&&(x[P]=w,S.push(P));if(_)for(var T=N[E],F=S.length,B=T,L;B<F;B++)L=S[B],M[B]=c[L]}return N[y]=S.length,z}});return o(wi,J({"Array, Array":function(e,n){t(Se(e),Se(n));var i=this(s(e),s(n));return u(i)?i.valueOf():i},"Matrix, Matrix":function(e,a){var r=e.size(),o=a.size();return t(r,o),1===r.length?1===o.length?n(e,a,r[0]):i(e,a):1===o.length?f(e,a):v(e,a)},"Matrix, Array":function(e,t){return this(e,s(t))},"Array, Matrix":function(e,t){return this(s(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return h(e,t,d,!1)},"DenseMatrix, any":function(e,t){return _(e,t,d,!1)},"any, SparseMatrix":function(e,t){return h(t,e,d,!0)},"any, DenseMatrix":function(e,t){return _(t,e,d,!0)},"Array, any":function(e,t){return _(s(e),t,d,!1).valueOf()},"any, Array":function(e,t){return _(s(t),e,d,!0).valueOf()},"any, any":d,"any, any, ...any":function(e,t,n){for(var a=this(e,t),r=0;r<n.length;r++)a=this(a,n[r]);return a}},d.signatures))}),Fi="subtract",Bi=we(Fi,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],e=>{var{typed:t,matrix:n,equalScalar:i,addScalar:a,unaryMinus:r,DenseMatrix:o}=e,s=Ii({typed:t}),p=Di({typed:t}),l=ji({typed:t,equalScalar:i}),d=Ai({typed:t,DenseMatrix:o}),c=ki({typed:t}),m=Ci({typed:t});return t(Fi,{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(e,t){return an(e,t),l(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return an(e,t),p(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return an(e,t),s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return an(e,t),c(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return d(e,r(t),a)},"DenseMatrix, any":function(e,t){return m(e,t,this)},"any, SparseMatrix":function(e,t){return d(t,e,this,!0)},"any, DenseMatrix":function(e,t){return m(t,e,this,!0)},"Array, any":function(e,t){return m(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return m(n(t),e,this,!0).valueOf()}})}),Li=we("algorithm07",["typed","DenseMatrix"],e=>{function t(e,t,n,a,r){for(var o=e._values,s=e._index,p=e._ptr,l=p[t],d=p[t+1],c;l<d;l++)c=s[l],n[c]=r,a[c]=o[l]}var{typed:n,DenseMatrix:r}=e;return function(e,a,o){var s=e._size,p=e._datatype,l=a._size,d=a._datatype;if(s.length!==l.length)throw new be(s.length,l.length);if(s[0]!==l[0]||s[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+l+")");var c=s[0],m=s[1],u=0,g=o,h;"string"==typeof p&&p===d&&(h=p,u=n.convert(0,h),g=n.find(o,[h,h]));var y=[],x,_;for(x=0;x<c;x++)y[x]=[];var f=[],v=[],b=[],M=[];for(_=0;_<m;_++){var S=_+1;for(t(e,_,b,f,S),t(a,_,M,v,S),x=0;x<c;x++){var N=b[x]===S?f[x]:u,z=M[x]===S?v[x]:u;y[x][_]=g(N,z)}}return new r({data:y,size:[c,m],datatype:h})}}),Ri="conj",Ui=we(Ri,["typed"],e=>{var{typed:t}=e;return t(Ri,{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return Gt(e,this)}})}),qi="identity",Zi=we(qi,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],e=>{function t(e,t){switch(e.length){case 0:return t?o(t):[];case 1:return n(e[0],e[0],t);case 2:return n(e[0],e[1],t);default:throw new Error("Vector containing two values expected");}}function n(e,t,n){var i=r(e)||r(t)?s:null;if(r(e)&&(e=e.toNumber()),r(t)&&(t=t.toNumber()),!ie(e)||1>e)throw new Error("Parameters in function identity must be positive integers");if(!ie(t)||1>t)throw new Error("Parameters in function identity must be positive integers");var a=i?new s(1):1,o=i?new i(0):0,c=[e,t];if(n){if("sparse"===n)return l.diagonal(c,a,0,o);if("dense"===n)return p.diagonal(c,a,0,o);throw new TypeError("Unknown matrix type \"".concat(n,"\""))}for(var m=Ce([],c,o),u=e<t?e:t,g=0;g<u;g++)m[g][g]=a;return m}var{typed:i,config:a,matrix:o,BigNumber:s,DenseMatrix:p,SparseMatrix:l}=e;return i(qi,{"":function(){return"Matrix"===a.matrix?o([]):[]},string:function(e){return o(e)},"number | BigNumber":function(e){return n(e,e,"Matrix"===a.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return n(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return n(e,t,"Matrix"===a.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,i){return n(e,t,i)},Array:function(e){return t(e)},"Array, string":function(e,n){return t(e,n)},Matrix:function(e){return t(e.valueOf(),e.storage())},"Matrix, string":function(e,n){return t(e.valueOf(),n)}})}),Hi=we("ones",["typed","config","matrix","BigNumber"],e=>{function t(e,t){var a=n(e),r=a?new p(1):1;if(i(e),t){var o=s(t);return 0<e.length?o.resize(e,r):o}var l=[];return 0<e.length?Ce(l,e,r):l}function n(e){var t=!1;return e.forEach(function(e,n,i){r(e)&&(t=!0,i[n]=e.toNumber())}),t}function i(e){e.forEach(function(e){if("number"!=typeof e||!ie(e)||0>e)throw new Error("Parameters in function ones must be positive integers")})}var{typed:a,config:o,matrix:s,BigNumber:p}=e;return a("ones",{"":function(){return"Array"===o.matrix?t([]):t([],"default")},"...number | BigNumber | string":function(e){var n=e[e.length-1];if("string"==typeof n){var i=e.pop();return t(e,i)}return"Array"===o.matrix?t(e):t(e,"default")},Array:t,Matrix:function(e){var n=e.storage();return t(e.valueOf(),n)},"Array | Matrix, string":function(e,n){return t(e.valueOf(),n)}})}),Vi="size",Yi=we(Vi,["typed","config","?matrix"],e=>{var{typed:t,config:n,matrix:i}=e;return t(Vi,{Matrix:function(e){return e.create(e.size())},Array:Se,string:function(e){return"Array"===n.matrix?[e.length]:i([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(){return"Array"===n.matrix?[]:i?i([]):sn()}})}),Wi=we("numeric",["number","?bignumber","?fraction"],e=>{var{number:t,bignumber:n,fraction:i}=e,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},r={number:e=>t(e),BigNumber:n?e=>n(e):rn,Fraction:i?e=>i(e):on};return function(e,t){var n=Y(e);if(!(n in a))throw new TypeError("Cannot convert "+e+" of type \""+n+"\"; valid input types are "+Object.keys(a).join(", "));if(!(t in r))throw new TypeError("Cannot convert "+e+" to type \""+t+"\"; valid output types are "+Object.keys(r).join(", "));return t===n?e:r[t](e)}}),Xi="divideScalar",Ji=we(Xi,["typed","numeric"],e=>{var{typed:t,numeric:n}=e;return t(Xi,{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var i=e.clone(),a=n(1,Y(t));return i.value=this(null===i.value?i._normalize(a):i.value,t),i},"number | Fraction | BigNumber, Unit":function(e,t){var i=t.clone();i=i.pow(-1);var a=n(1,Y(e));return i.value=this(e,null===t.value?t._normalize(a):t.value),i},"Unit, Unit":function(e,t){return e.divide(t)}})}),Gi="smaller",Ki=we(Gi,["typed","config","matrix","DenseMatrix"],e=>{var{typed:t,config:n,matrix:i,DenseMatrix:a}=e,r=Di({typed:t}),o=Li({typed:t,DenseMatrix:a}),s=Pi({typed:t,DenseMatrix:a}),p=ki({typed:t}),l=Ci({typed:t});return t(Gi,{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!ue(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!tn(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return r(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return r(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return p(e,t,this)},"Array, Array":function(e,t){return this(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return this(i(e),t)},"Matrix, Array":function(e,t){return this(e,i(t))},"SparseMatrix, any":function(e,t){return s(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return s(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(i(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(i(t),e,this,!0).valueOf()}})}),Qi="larger",$i=we(Qi,["typed","config","matrix","DenseMatrix"],e=>{var{typed:t,config:n,matrix:i,DenseMatrix:a}=e,r=Di({typed:t}),o=Li({typed:t,DenseMatrix:a}),s=Pi({typed:t,DenseMatrix:a}),p=ki({typed:t}),l=Ci({typed:t});return t(Qi,{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,t){return e>t&&!ue(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!tn(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return r(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return r(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return p(e,t,this)},"Array, Array":function(e,t){return this(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return this(i(e),t)},"Matrix, Array":function(e,t){return this(e,i(t))},"SparseMatrix, any":function(e,t){return s(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return s(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(i(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(i(t),e,this,!0).valueOf()}})}),ea=we("FibonacciHeap",["smaller","larger"],e=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function n(e,t,n){t.key=n;var r=t.parent;return r&&o(t.key,r.key)&&(i(e,t,r),a(e,r)),o(t.key,e.key)&&(e=t),e}function i(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}function a(e,t){var n=t.parent;n&&(t.mark?(i(e,t,n),a(n)):t.mark=!0)}function r(e,t){var n=cn(gn(t)*p)+1,a=Array(n),r=0,c=e;if(c)for(r++,c=c.right;c!==e;)r++,c=c.right;for(var m;0<r;){for(var u=c.degree,g=c.right;m=a[u],!!m;){if(s(c.key,m.key)){var h=m;m=c,c=h}l(m,c),a[u]=null,u++}a[u]=c,c=g,r--}e=null;for(var _=0;_<n;_++)(m=a[_],!!m)&&(e?(m.left.right=m.right,m.right.left=m.left,m.left=e,m.right=e.right,e.right=m,m.right.left=m,o(m.key,e.key)&&(e=m)):e=m);return e}var{smaller:o,larger:s}=e,p=1/gn((1+mn(5))/2);t.prototype.type="FibonacciHeap",t.prototype.isFibonacciHeap=!0,t.prototype.insert=function(e,t){var n={key:e,value:t,degree:0};if(this._minimum){var i=this._minimum;n.left=i,n.right=i.right,i.right=n,n.right.left=n,o(e,i.key)&&(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},t.prototype.size=function(){return this._size},t.prototype.clear=function(){this._minimum=null,this._size=0},t.prototype.isEmpty=function(){return 0===this._size},t.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var t=this._minimum,n=e.degree,i=e.child,a;0<n;)a=i.right,i.left.right=i.right,i.right.left=i.left,i.left=t,i.right=t.right,t.right=i,i.right.left=i,i.parent=null,i=a,n--;return e.left.right=e.right,e.right.left=e.left,e===e.right?t=null:(t=e.right,t=r(t,this._size)),this._size--,this._minimum=t,e},t.prototype.remove=function(e){this._minimum=n(this._minimum,e,-1),this.extractMinimum()};var l=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return t},{isClass:!0}),ta=we("Spa",["addScalar","equalScalar","FibonacciHeap"],e=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new a}var{addScalar:n,equalScalar:i,FibonacciHeap:a}=e;return t.prototype.type="Spa",t.prototype.isSpa=!0,t.prototype.set=function(e,t){if(!this._values[e]){var n=this._heap.insert(e,t);this._values[e]=n}else this._values[e].value=t},t.prototype.get=function(e){var t=this._values[e];return t?t.value:0},t.prototype.accumulate=function(e,t){var i=this._values[e];i?i.value=n(i.value,t):(i=this._heap.insert(e,t),this._values[e]=i)},t.prototype.forEach=function(e,t,a){var r=this._heap,o=this._values,s=[],p=r.extractMinimum();for(p&&s.push(p);p&&p.key<=t;)p.key>=e&&!i(p.value,0)&&a(p.key,p.value,this),p=r.extractMinimum(),p&&s.push(p);for(var l=0,d;l<s.length;l++)d=s[l],p=r.insert(d.key,d.value),o[p.key]=p},t.prototype.swap=function(e,t){var n=this._values[e],i=this._values[t];if(!n&&i)n=this._heap.insert(e,i.value),this._heap.remove(i),this._values[e]=n,this._values[t]=void 0;else if(n&&!i)i=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=i,this._values[e]=void 0;else if(n&&i){var a=n.value;n.value=i.value,i.value=a}},t},{isClass:!0}),na="dot",ia=we(na,["typed","addScalar","multiplyScalar","conj","size"],e=>{function t(e,t){var i=n(e),a=n(t),r,o;if(1===i.length)r=i[0];else if(2===i.length&&1===i[1])r=i[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");if(1===a.length)o=a[0];else if(2===a.length&&1===a[1])o=a[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+a.join(", ")+")");if(r!==o)throw new RangeError("Vectors must have equal length ("+r+" != "+o+")");if(0===r)throw new RangeError("Cannot calculate the dot product of empty vectors");return r}function n(e){return u(e)?e.size():p(e)}var{typed:i,addScalar:r,multiplyScalar:o,conj:s,size:p}=e;return i(na,{"Array | DenseMatrix, Array | DenseMatrix":function(e,a){var p=t(e,a),l=u(e)?e._data:e,d=u(e)?e._datatype:void 0,m=u(a)?a._data:a,g=u(a)?a._datatype:void 0,h=2===n(e).length,y=2===n(a).length,x=r,_=o;if(d&&g&&d===g&&"string"==typeof d){var f=d;x=i.find(r,[f,f]),_=i.find(o,[f,f])}if(!h&&!y){for(var v=_(s(l[0]),m[0]),b=1;b<p;b++)v=x(v,_(s(l[b]),m[b]));return v}if(!h&&y){for(var M=_(s(l[0]),m[0][0]),S=1;S<p;S++)M=x(M,_(s(l[S]),m[S][0]));return M}if(h&&!y){for(var N=_(s(l[0][0]),m[0]),z=1;z<p;z++)N=x(N,_(s(l[z][0]),m[z]));return N}if(h&&y){for(var E=_(s(l[0][0]),m[0][0]),C=1;C<p;C++)E=x(E,_(s(l[C][0]),m[C][0]));return E}},"SparseMatrix, SparseMatrix":function(e,n){t(e,n);for(var a=e._index,s=e._values,p=n._index,l=n._values,d=0,m=0,u=0;m<a.length&&u<p.length;){var g=a[m],h=p[u];if(g<h){m++;continue}if(g>h){u++;continue}g===h&&(d=r(d,o(s[m],l[u])),m++,u++)}return d}})}),aa="lup",ra=we(aa,["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],e=>{function t(e){var t=e._size[0],a=e._size[1],r=xn(t,a),o=W(e._data),g=[],y=[t,r],x=[],_=[r,a],f=[],b,M,S;for(b=0;b<t;b++)f[b]=b;for(M=0;M<a;M++){if(0<M)for(b=0;b<t;b++){var N=xn(b,M),z=0;for(S=0;S<N;S++)z=p(z,d(o[b][S],o[S][M]));o[b][M]=c(o[b][M],z)}var E=M,C=0,I=0;for(b=M;b<t;b++){var A=o[b][M],v=s(A);m(v,C)&&(E=b,C=v,I=A)}if(M!==E&&(f[M]=f[E],h._swapRows(M,E,o)),M<t)for(b=M+1;b<t;b++){var D=o[b][M];u(D,0)||(o[b][M]=l(o[b][M],I))}}for(M=0;M<a;M++)for(b=0;b<t;b++){if(0===M&&(b<a&&(x[b]=[]),g[b]=[]),b<M){b<a&&(x[b][M]=o[b][M]),M<t&&(g[b][M]=0);continue}if(b===M){b<a&&(x[b][M]=o[b][M]),M<t&&(g[b][M]=1);continue}b<a&&(x[b][M]=0),M<t&&(g[b][M]=o[b][M])}var P=new h({data:g,size:y}),O=new h({data:x,size:_}),w=[];for(b=0,r=f.length;b<r;b++)w[f[b]]=b;return{L:P,U:O,p:w,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}function n(e){var t=e._size[0],a=e._size[1],r=xn(t,a),n=e._values,o=e._index,p=e._ptr,c=[],h=[],_=[],f=[t,r],b=[],M=[],S=[],N=[r,a],z=[],E=[],C,I,v;for(C=0;C<t;C++)z[C]=C,E[C]=C;var A=function(e,t){var n=E[e],i=E[t];z[n]=t,z[i]=e,E[e]=i,E[t]=n},D=function(){var e=new x;I<t&&(_.push(c.length),c.push(1),h.push(I)),S.push(b.length);var i=p[I],a=p[I+1];for(v=i;v<a;v++)C=o[v],e.set(z[C],n[v]);0<I&&e.forEach(0,I-1,function(t,n){y._forEachRow(t,c,h,_,function(a,i){a>t&&e.accumulate(a,g(d(i,n)))})});var r=I,E=e.get(I),k=s(E);e.forEach(I+1,t-1,function(e,t){var n=s(t);m(n,k)&&(r=e,k=n,E=t)}),I!==r&&(y._swapRows(I,r,f[1],c,h,_),y._swapRows(I,r,N[1],b,M,S),e.swap(I,r),A(I,r)),e.forEach(0,t-1,function(e,t){e<=I?(b.push(t),M.push(e)):(t=l(t,E),!u(t,0)&&(c.push(t),h.push(e)))})};for(I=0;I<a;I++)D();return S.push(b.length),_.push(c.length),{L:new y({values:c,index:h,ptr:_,size:f}),U:new y({values:b,index:M,ptr:S,size:N}),p:z,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}var{typed:i,matrix:o,abs:s,addScalar:p,divideScalar:l,multiplyScalar:d,subtract:c,larger:m,equalScalar:u,unaryMinus:g,DenseMatrix:h,SparseMatrix:y,Spa:x}=e;return i(aa,{DenseMatrix:function(e){return t(e)},SparseMatrix:function(e){return n(e)},Array:function(e){var n=o(e),i=t(n);return{L:i.L.valueOf(),U:i.U.valueOf(),p:i.p}}})}),oa="det",sa=we(oa,["typed","matrix","subtract","multiply","unaryMinus","lup"],e=>{function t(e,t){if(1===t)return W(e[0][0]);if(2===t)return a(r(e[0][0],e[1][1]),r(e[1][0],e[0][1]));for(var n=s(e),p=n.U[0][0],l=1;l<t;l++)p=r(p,n.U[l][l]);for(var d=0,c=0,m=[];;){for(;m[c];)c++;if(c>=t)break;for(var u=c,g=0;!m[n.p[u]];)m[n.p[u]]=!0,u=n.p[u],g++;0==g%2&&d++}return 0==d%2?p:o(p)}var{typed:n,matrix:i,subtract:a,multiply:r,unaryMinus:o,lup:s}=e;return n(oa,{any:function(e){return W(e)},"Array | Matrix":function(e){var n;switch(u(e)?n=e.size():Array.isArray(e)?(e=i(e),n=e.size()):n=[],n.length){case 0:return W(e);case 1:if(1===n[0])return W(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+_e(n)+")");case 2:{var a=n[0],r=n[1];if(a===r)return t(e.clone().valueOf(),a);throw new RangeError("Matrix must be square (size: "+_e(n)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+_e(n)+")");}}})}),pa="inv",la=we(pa,["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],e=>{function t(e,t,n){var i,u,g,h,y;if(1===t){if(h=e[0][0],0===h)throw Error("Cannot calculate inverse, determinant is zero");return[[a(1,h)]]}if(2===t){var x=l(e);if(0===x)throw Error("Cannot calculate inverse, determinant is zero");return[[a(e[1][1],x),a(p(e[0][1]),x)],[a(p(e[1][0]),x),a(e[0][0],x)]]}var _=e.concat();for(i=0;i<t;i++)_[i]=_[i].concat();for(var v=d(t).valueOf(),b=0;b<n;b++){var M=m(_[b][b]),S=b;for(i=b+1;i<t;)m(_[i][b])>M&&(M=m(_[i][b]),S=i),i++;if(0===M)throw Error("Cannot calculate inverse, determinant is zero");i=S,i!==b&&(y=_[b],_[b]=_[i],_[i]=y,y=v[b],v[b]=v[i],v[i]=y);var N=_[b],z=v[b];for(i=0;i<t;i++){var E=_[i],C=v[i];if(i===b){for(g=N[b],u=b;u<n;u++)E[u]=a(E[u],g);for(u=0;u<n;u++)C[u]=a(C[u],g)}else if(0!==E[b]){for(g=a(p(E[b]),N[b]),u=b;u<n;u++)E[u]=r(E[u],o(g,N[u]));for(u=0;u<n;u++)C[u]=r(C[u],o(g,z[u]))}}}return v}var{typed:n,matrix:i,divideScalar:a,addScalar:r,multiply:o,unaryMinus:p,det:l,identity:d,abs:m}=e;return n(pa,{"Array | Matrix":function(e){var n=u(e)?e.size():Se(e);switch(n.length){case 1:if(1===n[0])return u(e)?i([a(1,e.valueOf()[0])]):[a(1,e[0])];throw new RangeError("Matrix must be square (size: "+_e(n)+")");case 2:{var r=n[0],o=n[1];if(r===o)return u(e)?i(t(e.valueOf(),r,o),e.storage()):t(e,r,o);throw new RangeError("Matrix must be square (size: "+_e(n)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+_e(n)+")");}},any:function(e){return a(1,e)}})}),da=ai({}),ca=ti({config:Cn}),ma=pi({}),ua=si({}),ga=li({Matrix:ma}),ha=jn({BigNumber:ca,Complex:da,DenseMatrix:ga,Fraction:ua}),ya=mi({config:Cn,typed:ha}),xa=hi({typed:ha}),_a=Oi({typed:ha}),fa=xi({Fraction:ua,typed:ha}),va=bi({typed:ha}),ba=zi({typed:ha}),Ma=Ui({typed:ha}),Sa=gi({Matrix:ma,equalScalar:ya,typed:ha}),Na=fi({DenseMatrix:ga,Matrix:ma,SparseMatrix:Sa,typed:ha}),za=Zi({BigNumber:ca,DenseMatrix:ga,SparseMatrix:Sa,config:Cn,matrix:Na,typed:ha}),Ea=Hi({BigNumber:ca,config:Cn,matrix:Na,typed:ha}),Ca=Yi({matrix:Na,config:Cn,typed:ha}),Ia=Ki({DenseMatrix:ga,config:Cn,matrix:Na,typed:ha}),Aa=$i({DenseMatrix:ga,config:Cn,matrix:Na,typed:ha}),ka=ea({larger:Aa,smaller:Ia}),Da=ia({addScalar:ba,conj:Ma,multiplyScalar:_a,size:Ca,typed:ha}),ja=Si({typed:ha}),Pa=Ti({addScalar:ba,dot:Da,equalScalar:ya,matrix:Na,multiplyScalar:_a,typed:ha}),Oa=yi({BigNumber:ca,typed:ha}),wa=Wi({bignumber:Oa,fraction:fa,number:xa}),Ta=Bi({DenseMatrix:ga,addScalar:ba,equalScalar:ya,matrix:Na,typed:ha,unaryMinus:va}),Fa=Ji({numeric:wa,typed:ha}),Ba=ta({FibonacciHeap:ka,addScalar:ba,equalScalar:ya}),La=ra({DenseMatrix:ga,Spa:Ba,SparseMatrix:Sa,abs:ja,addScalar:ba,divideScalar:Fa,equalScalar:ya,larger:Aa,matrix:Na,multiplyScalar:_a,subtract:Ta,typed:ha,unaryMinus:va}),Ra=sa({lup:La,matrix:Na,multiply:Pa,subtract:Ta,typed:ha,unaryMinus:va}),Ua=la({abs:ja,addScalar:ba,det:Ra,divideScalar:Fa,identity:za,matrix:Na,multiply:Pa,typed:ha,unaryMinus:va}),qa=function(){function e(n,i){var a=this;if(this._handlePointerStart=function(t){"empty"===a.penMode||("paint"===a.penMode&&a._handlePaintStart(t),"drag"===a.penMode&&a._handleDragStart(t),a._bindCurInteractiveModeEvents("move"),a._bindCurInteractiveModeEvents("end"),a._bindCurInteractiveModeEvents("leave"))},this._handlePointerMove=function(t){"empty"===a.penMode||("paint"===a.penMode&&a._handlePaintMove(t),"drag"===a.penMode&&a._handleDragMove(t))},this._handlePointerEnd=function(){"empty"===a.penMode||("paint"===a.penMode&&a._handlePaintEnd(),"drag"===a.penMode&&a._handleDragEnd(),a._cleanCurInteractiveModeEvents({action:"move"}),a._cleanCurInteractiveModeEvents({action:"end"}),a._cleanCurInteractiveModeEvents({action:"leave"}))},this._handlePointerLeave=function(){(a.isPainting||a.isDraging)&&a._handlePointerEnd()},this._handlePointerCancel=function(){(a.isPainting||a.isDraging)&&a._handlePointerEnd()},!n)throw new Error("container\u4E3A\u5FC5\u586B\u9879");this.container=this._getContainer(n),this.originalOptions=i,this.options=Mn(Mn({},e._defaultOptions),i);var r=this.options,o=r.size,s=r.className,p=r.manualMount,l=r.maxRevokeSteps,d=r.interactiveMode,c=r.penColor,m=r.penWidth,u=r.bgImgURL,g=r.bgImgRotate,h=r.bgColor,y=r.onRevokeStackChange,x=r.onPaintEnd,_=r.penMode,f=r.minScale,v=r.maxScale,b=r.initialScale,M=r.scaleTransition,S=r.scaleStep,N=t(o||[],2),z=N[0],E=N[1];this.width=e.DEFAULT_WIDTH,this.height=e.DEFAULT_HEIGHT,this.setSize([null==z?e.DEFAULT_WIDTH:z,null==E?e.DEFAULT_HEIGHT:E]),this.manualMount=!!p,this.revokeStack=[],this.MAX_REVOKE_STEPS=this._getLawfulMaxRevokeSteps(+l),this.isPainting=!1,this.lastPaintPoint=null,this.isDraging=!1,this.lastDragPoint=null,this.dragTransformX=0,this.dragTransformY=0,this.penMode=this._getPenMode(_),this.interactiveMode=this._getInteractiveMode(d),this.eventList=this._makeEventList(),this.penColor=this._getPenColor(c),this.penWidth=this._getPenWidth(m),this.className=this._getClassName(s),this.bgImgURL=u||"",this.bgColor=h||"",this.bgImgRotate=this._getLawfulRotateAngle(g),this._bgImgObject=null,this.originalSize=[],u&&this._getImgAndDraw(u),this.onRevokeStackChange=y,this.onPaintEnd=x,this.paintCount=0,this.scaleTransition=!!M,this.scaleStep="number"!=typeof S||isNaN(S)?.1:S,this.minScale=this._getLawfulMinScale(f),this.maxScale=this._getLawfulMaxScale(v),this.initialScale=this._getLawfulScale(b),this.scale=this.initialScale,setTimeout(function(){a._handleScaleChange()},0),this.container&&(this.container.style.overflow="hidden"),this.el=null,this.ctx=null,this.manualMount||this.mount()}return e.prototype._getLawfulScale=function(t){return"number"!=typeof t||isNaN(t)?e.DEFAULT_SCALE:t<this.minScale?this.minScale:t>this.maxScale?this.maxScale:t},e.prototype._getLawfulMinScale=function(t){return"number"!=typeof t||isNaN(t)||t<e.LIMIT_MIN_SCALE?e.LIMIT_MIN_SCALE:t},e.prototype._getLawfulMaxScale=function(t){return"number"!=typeof t||isNaN(t)||t<e.LIMIT_MIN_SCALE?e.DEFAULT_MAX_SCALE:t},e.prototype._getInteractiveMode=function(t){return e.INTERACTIVE_MODE_ENUM.includes(t)?t:"mouse"},e.prototype._getPenMode=function(t){return e.PEN_MODE_ENUM.includes(t)?t:"empty"},e.prototype._getContainer=function(e){if(e instanceof HTMLElement)return e;var t=zn(e);if(null==t)throw new Error("\u627E\u4E0D\u5230container");else return t},e.prototype._getClassName=function(e){return e&&"string"==typeof e?e:""},e.prototype._getPenColor=function(e){return e&&"string"==typeof e?e:"red"},e.prototype._getPenWidth=function(e){return!e||"number"!=typeof e||isNaN(e)||0>=e?6:e},e.prototype._getLawfulRotateAngle=function(e){if("number"!=typeof e||isNaN(e))throw new Error("\u8BF7\u4F20\u5165\u5408\u6CD5\u7684\u89D2\u5EA6\u503C");var t=e%360,n=0>t?t+360:t,i=45<=n%90?90*hn(n/90)%360:90*cn(n/90)%360;return vn(i)},e.prototype._getPointOffset=function(t){if(t instanceof MouseEvent)return{x:t.offsetX,y:t.offsetY};var e=t.touches,n=e[0],i=n.clientX,a=n.clientY,r=ln(t.target),o=r.parentScrollTop,s=r.parentScrollLeft,p=pn(i+s,a+o,this.el),l=p.x,d=p.y;return{x:l,y:d}},e.prototype._getLawfulMaxRevokeSteps=function(t){return 0>=t||"number"!=typeof t||isNaN(t)?e.LIMIT_MIN_REVOKE_STEPS:t>e.LIMIT_MAX_REVOKE_STEPS?e.LIMIT_MAX_REVOKE_STEPS:t},e.prototype._getPointerType=function(e){return"both"===e?"touchAndMouse":"touch"===e?"touch":"mouse"},e.prototype._makeEventList=function(){return[{pointerType:"mouse",action:"start",name:"mousedown",handler:this._handlePointerStart},{pointerType:"mouse",action:"move",name:"mousemove",handler:this._handlePointerMove},{pointerType:"mouse",action:"end",name:"mouseup",handler:this._handlePointerEnd},{pointerType:"mouse",action:"leave",name:"mouseleave",handler:this._handlePointerLeave},{pointerType:"touch",action:"start",name:"touchstart",handler:this._handlePointerStart},{pointerType:"touch",action:"move",name:"touchmove",handler:this._handlePointerMove},{pointerType:"touch",action:"end",name:"touchend",handler:this._handlePointerEnd},{pointerType:"touch",action:"cancel",name:"touchcancel",handler:this._handlePointerCancel}]},e.prototype._getEventItems=function(e){var t=e.pointerType,n=e.action,i;if(t&&"touchAndMouse"!==t)i=n?function(e){return e.pointerType===t&&e.action===n}:function(e){return e.pointerType===t};else if(n)i=function(e){return e.action===n};else return this.eventList;return this.eventList.filter(i)},e.prototype._makeCanvas=function(){return document.createElement("canvas")},e.prototype._getCtx=function(){var e=this.el&&this.el.getContext&&this.el.getContext("2d");if(null==e)throw new Error("\u65E0\u6CD5\u83B7\u53D6\u5230context");return e},e.prototype._setCanvasTransform=function(e,t,n,i){if(void 0===i&&(i=!1),!!this.el){var a="transform:scale("+n+") translate3d("+e+"px,"+t+"px,0);transform-origin:center;",r=i?a+"transition:0.3s;":a;this.el.setAttribute("style",r)}},e.prototype._setDOMSize=function(e){var n=t(e,2),i=n[0],a=n[1];null!=i&&this.el&&(this.el.width=i),null!=a&&this.el&&(this.el.height=a)},e.prototype._setPenMode=function(t){e.PEN_MODE_ENUM.includes(t)&&(this.penMode=t)},e.prototype._saveImageData=function(e,t,n){void 0===e&&(e="paint"),["paint","clear"].includes(e)&&null!=t&&n&&n instanceof ImageData&&(this.revokeStack.length>=this.MAX_REVOKE_STEPS&&this.revokeStack.shift(),this.revokeStack.push({type:e,paintCount:t,imageData:n}),this.onRevokeStackChange&&"function"==typeof this.onRevokeStackChange&&this.onRevokeStackChange(this.revokeStack),void 0)},e.prototype._bindCurInteractiveModeEvents=function(e){if(this.el){var t=this._getPointerType(this.interactiveMode),n={pointerType:t,action:e};this._cleanCurInteractiveModeEvents(n),this._bindEvent(n)}},e.prototype._cleanCurInteractiveModeEvents=function(e){var t=e.action;if(this.el){var n=this._getPointerType(this.interactiveMode);this._cleanEvent({pointerType:n,action:t})}},e.prototype._bindEvent=function(e){var t=this;void 0===e&&(e={});var n=this._getEventItems(e);n&&n.length&&n.forEach(function(e){var n=e.name,i=e.handler;t.el&&t.el.addEventListener(n,i,!0)})},e.prototype._cleanEvent=function(e){var t=this;void 0===e&&(e={});var n=this._getEventItems(e);n&&n.length&&n.forEach(function(e){var n=e.name,i=e.handler;return t.el&&t.el.removeEventListener(n,i,!0)})},e.prototype._revoke=function(){if(this.ctx&&this.revokeStack&&this.revokeStack.length){var e=this.revokeStack.pop(),t=e.imageData,n=e.paintCount;this.ctx.putImageData(t,0,0),this.paintCount=n,this.onRevokeStackChange&&"function"==typeof this.onRevokeStackChange&&this.onRevokeStackChange(this.revokeStack)}},e.prototype._getImgAndDraw=function(e){var t=this;yn(e).then(function(e){t._bgImgObject=e,t.originalSize=[e.width,e.height],t._drawBg(e,t.originalSize[0],t.originalSize[1])}).catch(function(){t._bgImgObject=null})},e.prototype._drawBg=function(e,t,n){if(e&&this.ctx&&this.ctx.drawImage&&t&&n&&!(0>=t)&&!(0>=n)){var i=0===this.bgImgRotate||180===this.bgImgRotate?-this.width/2:-this.height/2,a=0===this.bgImgRotate||180===this.bgImgRotate?-this.height/2:-this.width/2,r=0===this.bgImgRotate||180===this.bgImgRotate?this.width:this.height,o=0===this.bgImgRotate||180===this.bgImgRotate?this.height:this.width;this.ctx.save(),this.ctx.translate(this.width/2,this.height/2),this.ctx.rotate(dn/180*this.bgImgRotate),this.ctx.drawImage(e,0,0,t,n,i,a,r,o),this.ctx.restore()}},e.prototype._drawCircle=function(e,t,n,i){void 0===n&&(n=3),void 0===i&&(i="red"),this.ctx&&(this.ctx.save(),this.ctx.fillStyle=i,this.ctx.beginPath(),this.ctx.arc(e,t,n,0,360*(dn/180),!1),this.ctx.fill(),this.ctx.restore())},e.prototype._drawLine=function(e,t,n,i,a,r){void 0===a&&(a=6),void 0===r&&(r="red"),this.ctx&&(this.ctx.save(),this.ctx.strokeStyle=r,this.ctx.lineWidth=a,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(n,i),this.ctx.stroke(),this.ctx.restore())},e.prototype._handlePaintStart=function(t){this.isPainting=!0,this.lastPaintPoint=this._getPointOffset(t),this.ctx&&this._saveImageData("paint",this.paintCount,this.ctx.getImageData(0,0,this.width,this.height)),this._drawCircle(this.lastPaintPoint.x,this.lastPaintPoint.y,this.penWidth/2,this.penColor)},e.prototype._handleDragStart=function(t){this.isDraging=!0,this.lastDragPoint=this._getPointOffset(t)},e.prototype._handlePaintMove=function(t){if(this.isPainting){var e=this._getPointOffset(t),n=e.x,i=e.y;if(null==this.lastPaintPoint)throw new Error("lastPaintPoint\u65E0\u6CD5\u83B7\u53D6");var a=this.lastPaintPoint,r=a.x,o=a.y;this._drawLine(r,o,n,i,this.penWidth,this.penColor),this.lastPaintPoint={x:n,y:i}}},e.prototype._handleDragMove=function(t){if(this.isDraging){var e=this._getPointOffset(t),n=e.x,i=e.y;if(null==this.lastDragPoint)throw new Error("lastDragPoint\u65E0\u6CD5\u83B7\u53D6");var a=this.lastDragPoint,r=a.x,o=a.y;this.dragTransformX+=n-r,this.dragTransformY+=i-o,this._setCanvasTransform(this.dragTransformX,this.dragTransformY,this.scale)}},e.prototype._handlePaintEnd=function(){this.isPainting=!1,this.paintCount++,this.onPaintEnd&&"function"==typeof this.onPaintEnd&&this.onPaintEnd(this.paintCount)},e.prototype._handleDragEnd=function(){this.isDraging=!1},e.prototype._handleScaleChange=function(){this.el&&this._setCanvasTransform(this.dragTransformX,this.dragTransformY,this.scale,this.scaleTransition)},e.prototype.setPenStyle=function(e){var t=e.color,n=e.width;t&&(this.penColor=this._getPenColor(t)),n&&(this.penWidth=this._getPenWidth(n))},e.prototype.setSize=function(e){var n=t(e,2),i=n[0],a=n[1];i&&(this.width=i),a&&(this.height=a),this._setDOMSize([i,a])},e.prototype.setClassName=function(e){e&&this.el&&(this.el.className=e)},e.prototype.setPenModePaint=function(){this._setPenMode("paint")},e.prototype.setPenModeDrag=function(){this._setPenMode("drag")},e.prototype.setPenModeEmpty=function(){this._setPenMode("empty")},e.prototype.setScale=function(e){var t=parseFloat(e);isNaN(t)||t===this.scale||(this.scale=this._getLawfulScale(e),this._handleScaleChange())},e.prototype.mount=function(){this.el||(this.el=this._makeCanvas()),this.ctx||(this.ctx=this._getCtx()),this._setDOMSize([this.width,this.height]),this.setClassName(this.className),this._bindCurInteractiveModeEvents("start"),this.container.appendChild(this.el)},e.prototype.destory=function(){this.el&&this.container.removeChild(this.el),this.el=null,this._bgImgObject=null},e.prototype.clear=function(){this.ctx&&this.el&&(this._saveImageData("clear",this.paintCount,this.ctx.getImageData(0,0,this.width,this.height)),this.ctx.clearRect(0,0,this.width,this.height),this.paintCount=0,this._bgImgObject&&this._drawBg(this._bgImgObject,this.originalSize[0],this.originalSize[1]),void 0)},e.prototype.rotate=function(e){void 0===e&&(e=1),[1,-1].includes(e)&&(this.bgImgRotate=this._getLawfulRotateAngle(this.bgImgRotate+90*e),this.setSize([this.height,this.width]),this._bgImgObject&&this._drawBg(this._bgImgObject,this.originalSize[0],this.originalSize[1]),this.paintCount=0,this.revokeStack=[])},e.prototype.revoke=function(){this._revoke()},e.prototype.setBgImg=function(e,t,n){var i=this;if("string"!=typeof e)e!==this._bgImgObject&&(this._bgImgObject=e),this.originalSize=[t||this.width,n||this.height],this._drawBg(e,this.originalSize[0],this.originalSize[1]);else if(/^(http[s]?)|(data:image)/.test(e))yn(e).then(function(e){i._bgImgObject=e,i.originalSize=[t||e.width,n||e.height],i._drawBg(e,i.originalSize[0],i.originalSize[1])}).catch(function(){i._bgImgObject=null});else throw new Error("\u8BF7\u4F20\u5165\u5408\u6CD5\u7684url")},e.prototype.makeScaleAdd=function(){var e=this.scale+this.scaleStep;this.setScale(e)},e.prototype.makeScaleSubtract=function(){var e=this.scale-this.scaleStep;this.setScale(e)},e.prototype.reset=function(){this.dragTransformX=this.dragTransformY=0,this.scale=this.initialScale,this._setCanvasTransform(this.dragTransformX,this.dragTransformY,this.scale,this.scaleTransition)},e.prototype.getPaintCount=function(){return this.paintCount},e.prototype.getDataUrl=function(t,n){if(void 0===t&&(t="png"),void 0===n&&(n=1),!this.el||!e.IMG_TYPE_ENUM.includes(t)||"number"!=typeof n||isNaN(n))throw new Error("\u751F\u6210dataURL\u9519\u8BEF");.3>n&&(n=.3),1<n&&(n=1);var i="image/"+("jpg"===t?"jpeg":t);return this.el.toDataURL(i,n)},e.prototype.getBlob=function(t,n){var i=this;if(void 0===t&&(t="png"),void 0===n&&(n=1),!this.el||!e.IMG_TYPE_ENUM.includes(t)||"number"!=typeof n||isNaN(n))throw new Error("\u751F\u6210blob\u9519\u8BEF");.3>n&&(n=.3),1<n&&(n=1);var a="image/"+t;return new Promise(function(e){i.el&&i.el.toBlob(function(t){null!=t&&e(t)},a,n)})},e.prototype.getFile=function(e,t,i){return void 0===e&&(e="drawingBoard"),void 0===t&&(t="png"),void 0===i&&(i=1),this.getBlob(t,i).then(function(t){return n(t,e)})},e.prototype.download=function(t,n,i){if(void 0===t&&(t="png"),void 0===n&&(n=1),void 0===i&&(i="drawing-board"),e.IMG_TYPE_ENUM.includes(t)&&"number"==typeof n&&!isNaN(n)){.3>n&&(n=.3),1<n&&(n=1);var a=this.getDataUrl(t,n);if(a){var r=document.createElement("a");document.body.appendChild(r),r.href=a,r.download=i+"-"+new Date().getTime(),r.target="_blank",r.click();var o=setTimeout(function(){r&&document.body.removeChild(r),r=null,clearTimeout(o),o=null},200)}}},e.INTERACTIVE_MODE_ENUM=["mouse","touch","both"],e.IMG_TYPE_ENUM=["jpg","jpeg","png","webp"],e.PEN_MODE_ENUM=["paint","drag","empty"],e.DEFAULT_WIDTH=300,e.DEFAULT_HEIGHT=150,e.LIMIT_MIN_REVOKE_STEPS=10,e.LIMIT_MAX_REVOKE_STEPS=50,e.LIMIT_MIN_SCALE=.1,e.DEFAULT_SCALE=1,e.DEFAULT_MAX_SCALE=5,e._defaultOptions={size:[],className:"",manualMount:!1,maxRevokeSteps:10,interactiveMode:"mouse",penMode:"empty",penColor:"red",penWidth:6,bgImgURL:"",bgImgRotate:0,bgColor:"#fff",onRevokeStackChange:null,onPaintEnd:null,minScale:1,maxScale:3,initialScale:1,scaleTransition:!0,scaleStep:.1},e}();return qa});
//# sourceMappingURL=drawing-board.umd.js.map
